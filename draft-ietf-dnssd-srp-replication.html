<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Automatic Replication of DNS-SD Service Registration Protocol Zones</title>
<meta content="Ted Lemon" name="author">
<meta content="Abtin Keshavarzian" name="author">
<meta content="Jonathan Hui" name="author">
<meta content="
       This document describes a protocol that can be used for ad-hoc replication of a DNS zone by multiple servers where a single primary DNS authoritative server is not available and the use of stable storage is not desirable. 
    " name="description">
<meta content="xml2rfc 3.23.2" name="generator">
<meta content="draft-ietf-dnssd-srp-replication-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.23.2
    Python 3.12.7
    ConfigArgParse 1.7
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.4
    lxml 4.9.4
    platformdirs 4.3.6
    pycountry 22.3.5
    PyYAML 6.0.1
    requests 2.32.3
    setuptools 70.3.0
    wcwidth 0.2.13
-->
<link href="draft-ietf-dnssd-srp-replication.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 2px 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 1px 0 0 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre, .vcard {
    page-break-inside: avoid;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  :is(h2, h3, h4, h5, h6)+*, dd {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
  .toplink {
    display: none;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">DNS-SD SRP Replication</td>
<td class="right">October 2024</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lemon, et al.</td>
<td class="center">Expires 20 April 2025</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Internet Engineering Task Force</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2024-10-17" class="published">17 October 2024</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2025-04-20">20 April 2025</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Lemon</div>
<div class="org">Apple Inc.</div>
</div>
<div class="author">
      <div class="author-name">A. Keshavarzian</div>
<div class="org">Google</div>
</div>
<div class="author">
      <div class="author-name">J. Hui</div>
<div class="org">Google</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Automatic Replication of DNS-SD Service Registration Protocol Zones</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes a protocol that can be used for ad-hoc replication of a DNS zone by multiple servers where a single primary DNS authoritative server is not available and the use of stable storage is not desirable.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://dnssd-wg.github.io/draft-ietf-dnssd-srp-replication/draft-ietf-dnssd-srp-replication.html">https://dnssd-wg.github.io/draft-ietf-dnssd-srp-replication/draft-ietf-dnssd-srp-replication.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-ietf-dnssd-srp-replication/">https://datatracker.ietf.org/doc/draft-ietf-dnssd-srp-replication/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        DNSSD Working Group mailing list (<span><a href="mailto:dnssd@ietf.org">mailto:dnssd@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/dnssd/">https://mailarchive.ietf.org/arch/browse/dnssd/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/dnssd/">https://www.ietf.org/mailman/listinfo/dnssd/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/dnssd-wg/draft-ietf-dnssd-srp-replication">https://github.com/dnssd-wg/draft-ietf-dnssd-srp-replication</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 20 April 2025.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2024 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-alternatives-for-maintainin" class="internal xref">Alternatives for maintaining SRP state</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1.2.1">
                    <p id="section-toc.1-1.1.2.1.2.1.1" class="keepWithNext"><a href="#section-1.1.1" class="auto internal xref">1.1.1</a>.  <a href="#name-primary-authoritative-dns-s" class="internal xref">Primary authoritative DNS service</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1.2.2">
                    <p id="section-toc.1-1.1.2.1.2.2.1" class="keepWithNext"><a href="#section-1.1.2" class="auto internal xref">1.1.2</a>.  <a href="#name-multicast-dns-advertising-p" class="internal xref">Multicast DNS Advertising Proxy</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1.2.3">
                    <p id="section-toc.1-1.1.2.1.2.3.1" class="keepWithNext"><a href="#section-1.1.3" class="auto internal xref">1.1.3</a>.  <a href="#name-srp-replication" class="internal xref">SRP Replication</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-implementation" class="internal xref">Implementation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-naming-of-a-common-service-" class="internal xref">Naming of a common service zone</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1"><a href="#section-2.1.1" class="auto internal xref">2.1.1</a>.  <a href="#name-zone-name-based-on-network-" class="internal xref">Zone name based on network name</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.2">
                    <p id="section-toc.1-1.2.2.1.2.2.1"><a href="#section-2.1.2" class="auto internal xref">2.1.2</a>.  <a href="#name-zone-name-based-on-local-co" class="internal xref">Zone name based on local configuration</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.3">
                    <p id="section-toc.1-1.2.2.1.2.3.1"><a href="#section-2.1.3" class="auto internal xref">2.1.3</a>.  <a href="#name-zone-name-based-on-dns-sd-d" class="internal xref">Zone name based on DNS-SD discovery</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-advertising-ones-own-replic" class="internal xref">Advertising one's own replication service</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="auto internal xref">2.3</a>.  <a href="#name-discovering-other-replicati" class="internal xref">Discovering other replication services</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="auto internal xref">2.4</a>.  <a href="#name-startup" class="internal xref">Startup</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.1">
                    <p id="section-toc.1-1.2.2.4.2.1.1"><a href="#section-2.4.1" class="auto internal xref">2.4.1</a>.  <a href="#name-determining-an-srp-zone-nam" class="internal xref">Determining an SRP zone name</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4.2.2">
                    <p id="section-toc.1-1.2.2.4.2.2.1"><a href="#section-2.4.2" class="auto internal xref">2.4.2</a>.  <a href="#name-determining-a-dataset-id" class="internal xref">Determining a Dataset ID</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="auto internal xref">2.5</a>.  <a href="#name-discovering-the-addresses-o" class="internal xref">Discovering the addresses of partners</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6">
                <p id="section-toc.1-1.2.2.6.1"><a href="#section-2.6" class="auto internal xref">2.6</a>.  <a href="#name-partner-id" class="internal xref">Partner ID</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.7">
                <p id="section-toc.1-1.2.2.7.1"><a href="#section-2.7" class="auto internal xref">2.7</a>.  <a href="#name-establishing-communication-" class="internal xref">Establishing Communication with a replication partner</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.8">
                <p id="section-toc.1-1.2.2.8.1"><a href="#section-2.8" class="auto internal xref">2.8</a>.  <a href="#name-incoming-connections" class="internal xref">Incoming connections</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.9">
                <p id="section-toc.1-1.2.2.9.1"><a href="#section-2.9" class="auto internal xref">2.9</a>.  <a href="#name-initial-synchronization" class="internal xref">Initial synchronization</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.9.2.1">
                    <p id="section-toc.1-1.2.2.9.2.1.1"><a href="#section-2.9.1" class="auto internal xref">2.9.1</a>.  <a href="#name-sending-candidates" class="internal xref">Sending candidates</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10">
                <p id="section-toc.1-1.2.2.10.1"><a href="#section-2.10" class="auto internal xref">2.10</a>. <a href="#name-routine-operation" class="internal xref">Routine Operation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-protocol-details" class="internal xref">Protocol Details</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-dns-stateful-operations-con" class="internal xref">DNS Stateful Operations considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a href="#section-3.1.1" class="auto internal xref">3.1.1</a>.  <a href="#name-dso-session-establishment" class="internal xref">DSO Session Establishment</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1.2.2">
                    <p id="section-toc.1-1.3.2.1.2.2.1"><a href="#section-3.1.2" class="auto internal xref">3.1.2</a>.  <a href="#name-dso-session-maintenance" class="internal xref">DSO Session maintenance</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-srpl-messages" class="internal xref">SRPL Messages</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a href="#section-3.2.1" class="auto internal xref">3.2.1</a>.  <a href="#name-srpl-session" class="internal xref">SRPL Session</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.2">
                    <p id="section-toc.1-1.3.2.2.2.2.1"><a href="#section-3.2.2" class="auto internal xref">3.2.2</a>.  <a href="#name-srpl-send-candidates" class="internal xref">SRPL Send Candidates</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.3">
                    <p id="section-toc.1-1.3.2.2.2.3.1"><a href="#section-3.2.3" class="auto internal xref">3.2.3</a>.  <a href="#name-srpl-candidate" class="internal xref">SRPL Candidate</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.4">
                    <p id="section-toc.1-1.3.2.2.2.4.1"><a href="#section-3.2.4" class="auto internal xref">3.2.4</a>.  <a href="#name-srpl-host" class="internal xref">SRPL Host</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-dso-secondary-tlvs" class="internal xref">DSO Secondary TLVs</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="auto internal xref">3.3.1</a>.  <a href="#name-srpl-candidate-yes" class="internal xref">SRPL Candidate Yes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="auto internal xref">3.3.2</a>.  <a href="#name-srpl-candidate-no" class="internal xref">SRPL Candidate No</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.3">
                    <p id="section-toc.1-1.3.2.3.2.3.1"><a href="#section-3.3.3" class="auto internal xref">3.3.3</a>.  <a href="#name-srpl-conflict" class="internal xref">SRPL Conflict</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.4">
                    <p id="section-toc.1-1.3.2.3.2.4.1"><a href="#section-3.3.4" class="auto internal xref">3.3.4</a>.  <a href="#name-srpl-hostname" class="internal xref">SRPL Hostname</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.5">
                    <p id="section-toc.1-1.3.2.3.2.5.1"><a href="#section-3.3.5" class="auto internal xref">3.3.5</a>.  <a href="#name-srpl-host-message" class="internal xref">SRPL Host Message</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.6">
                    <p id="section-toc.1-1.3.2.3.2.6.1"><a href="#section-3.3.6" class="auto internal xref">3.3.6</a>.  <a href="#name-srpl-time-offset" class="internal xref">SRPL Time Offset</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.7">
                    <p id="section-toc.1-1.3.2.3.2.7.1"><a href="#section-3.3.7" class="auto internal xref">3.3.7</a>.  <a href="#name-srpl-key-id" class="internal xref">SRPL Key ID</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.8">
                    <p id="section-toc.1-1.3.2.3.2.8.1"><a href="#section-3.3.8" class="auto internal xref">3.3.8</a>.  <a href="#name-srpl-new-partner" class="internal xref">SRPL New Partner</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-delegation-of-localarpa" class="internal xref">Delegation of 'local.arpa.'</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-srpl-tls-service-name" class="internal xref">'srpl-tls' Service Name</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-dso-tlv-type-code" class="internal xref">DSO TLV type code</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-registration-and-delegation" class="internal xref">Registration and Delegation of 'local.arpa' as a Special-Use Domain Name</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The DNS-SD Service Registration Protocol provides a way for network services to update a DNS zone with DNS-SD information. SRP uses unicast DNS Updates, rather than multicast DNS, to advertise services. This has several advantages over multicast DNS:<a href="#section-1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-2.1">Reduces reliance on multicast<a href="#section-1-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-2.2">Reduces traffic to devices providing services, which may be constrained devices operating on battery power<a href="#section-1-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-2.3">Allows the advertisement of services on one network link to consumers of such services on a different network link<a href="#section-1-2.3" class="pilcrow">¶</a>
</li>
      </ul>
<div id="alternatives-for-maintaining-srp-state">
<section id="section-1.1">
        <h3 id="name-alternatives-for-maintainin">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-alternatives-for-maintainin" class="section-name selfRef">Alternatives for maintaining SRP state</a>
        </h3>
<div id="primary-authoritative-dns-service">
<section id="section-1.1.1">
          <h4 id="name-primary-authoritative-dns-s">
<a href="#section-1.1.1" class="section-number selfRef">1.1.1. </a><a href="#name-primary-authoritative-dns-s" class="section-name selfRef">Primary authoritative DNS service</a>
          </h4>
<p id="section-1.1.1-1">Ideally, SRP updates a primary authoritative DNS server for a particular zone. This DNS server acts as the sole source of truth for names within the DNS zone in which SRP services are published. Redundancy is provided by secondary DNS servers, if needed. However, this approach has some drawbacks.<a href="#section-1.1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1.1-2">First, it requires 100% availability on the part of a DNS primary authoritative server for the zone. If the primary server is not available for some period of time, new services appearing on the network cannot be registered until primary authoritative service is restored.<a href="#section-1.1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1.1-3">The second drawback is that there is no automatic method for managing DNS authoritative service. This means that such a service requires an operator to set it up. What it means to set up such a service is that the following capabilities are provided:<a href="#section-1.1.1-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1.1-4.1">An host must be available to act as a primary authoritative DNS server<a href="#section-1.1.1-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-1.1.1-4.2">The zone advertised by that server must be delegated, so that the local resolver can successfully answer queries in that zone<a href="#section-1.1.1-4.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-1.1.1-4.3">The local resolver must be able to provide local browsing domain advertisements (<span><a href="https://rfc-editor.org/rfc/rfc6763#section-11" class="relref">Section 11</a> of [<a href="#RFC6763" class="cite xref">RFC6763</a>]</span>).<a href="#section-1.1.1-4.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="multicast-dns-advertising-proxy">
<section id="section-1.1.2">
          <h4 id="name-multicast-dns-advertising-p">
<a href="#section-1.1.2" class="section-number selfRef">1.1.2. </a><a href="#name-multicast-dns-advertising-p" class="section-name selfRef">Multicast DNS Advertising Proxy</a>
          </h4>
<p id="section-1.1.2-1">
            An existing alternative to the use of DNS authoritative services for advertising SRP
            registrations the advertising proxy [draft-tlsc-advertising-proxy]. An advertising
            proxy advertises the contents of the SRP update zone using multicast DNS on links on
            which the need for such advertisements is anticipated. This works well for stub
            networks [draft-lemon-stub-networks], where services advertised on the stub network
            must be visible both on the stub network and on the adjacent infrastructure network,
            but do not generally need to be discoverable on other networks.<a href="#section-1.1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.1.2-2">
            One drawback of the advertising proxy model, however, is that there is no shared
            database from which to advertise services registered by SRP. As a consequence, some
            of the guarantees provided by SRP, particularly first come, first served naming
            [draft-ietf-dnssd-srp]. Because advertising proxies are set up automatically on an
            ad-hoc basis, coordination between advertising proxies is not present, which means
            that if two devices claim the same name, but register with different SRP servers,
            the conflict is not detected until the service is advertised using mDNS. In
            practice, this results in frequent renaming of services, which means that consumers
            of services need to carefully follow each service that they use as the name changes
            over time.<a href="#section-1.1.2-2" class="pilcrow">¶</a></p>
<p id="section-1.1.2-3">An additional drawback is that, from the perspective of the SRP client, SRP service is not unified: SRP servers tend to come and go, and whenever the SRP service with which a particular client has registered goes offline, the client has to notice that this has happened, discover a new SRP server, and re-register, or else it becomes unreachable.<a href="#section-1.1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="srp-replication">
<section id="section-1.1.3">
          <h4 id="name-srp-replication">
<a href="#section-1.1.3" class="section-number selfRef">1.1.3. </a><a href="#name-srp-replication" class="section-name selfRef">SRP Replication</a>
          </h4>
<p id="section-1.1.3-1">This document describes a replication mechanism which eliminates the need for a single authoritative source of truth, as in the Primary Authoritative DNS model, while eliminating the drawbacks of the Advertising Proxy model. SRP Replication servers discover each other automatically. Each replication server maintains a copy of the SRP zone which is kept up to date on a best-effort basis.<a href="#section-1.1.3-1" class="pilcrow">¶</a></p>
<p id="section-1.1.3-2">SRP Replication has several benefits:<a href="#section-1.1.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.1.3-3.1">As long as one SRP replication partner remains online at all times, SRP state is maintained when individual SRP replication partners go offline<a href="#section-1.1.3-3.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-1.1.3-3.2">Name collisions when SRP clients change servers are avoided<a href="#section-1.1.3-3.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-1.1.3-3.3">SRP service on a stub network can appear as an anycast service, so that SRP clients do not see an apparent change in servers and re-register when the server with which they most recently registered goes offline<a href="#section-1.1.3-3.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="implementation">
<section id="section-2">
      <h2 id="name-implementation">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-implementation" class="section-name selfRef">Implementation</a>
      </h2>
<p id="section-2-1">SRP Replication relies on the fact that any given client is always registering with exactly one SRP server at any given time. This means that when an SRP server receives an SRP update from a client, it can be sure that no other SRP server has a more recent version of that SRP client's registration. Consequently, that SRP server can behave as if it is the source of truth for that client's registration, and other SRP servers can safely assume that any data they have about the client that is less recent can be replaced with the new registration data.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="naming-of-a-common-service-zone">
<section id="section-2.1">
        <h3 id="name-naming-of-a-common-service-">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-naming-of-a-common-service-" class="section-name selfRef">Naming of a common service zone</a>
        </h3>
<p id="section-2.1-1">In order for SRP replication partners to replicate a zone, they must agree upon a common name for the zone. We will describe two mechanisms for agreeing on a common zone here.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<div id="zone-name-based-on-network-name">
<section id="section-2.1.1">
          <h4 id="name-zone-name-based-on-network-">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-zone-name-based-on-network-" class="section-name selfRef">Zone name based on network name</a>
          </h4>
<p id="section-2.1.1-1">Network names aren't guaranteed to be unique, but tend to be unique for any given site. In the case of ad-hoc (permissionless) SRP-based service, such as an advertising proxy or an authoritative service using a locally-served zone [https://www.iana.org/assignments/locally-served-dns-zones/locally-served-dns-zones.xhtml], because the DNS zone name isn't required to be globally unique, a zone name based on the network name is an easy solution to generating a unique zone name.<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1.1-2">When generating a zone name based on a network name, the zone name could be based on a locally configured global zone name, e.g. 'example.com'. It could be based on a locally-managed locally-served name, e.g. 'home.arpa'. Or it could be based on an unmanaged locally-served name, for which we propose to use the root name 'local.arpa.' For the rest of this section we will assume that the specific setting determines which of these domains will be used, and refer to whichever domain that is as DOMAIN.<a href="#section-2.1.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1.1-3">For zone names based on the network name, the network type should be used as a differentiator, in case there are two different local network types with the same name. So, for example, 'WiFi.DOMAIN.'<a href="#section-2.1.1-3" class="pilcrow">¶</a></p>
<div id="zone-name-based-on-wifi-ssid">
<section id="section-2.1.1.1">
            <h5 id="name-zone-name-based-on-wifi-ssi">
<a href="#section-2.1.1.1" class="section-number selfRef">2.1.1.1. </a><a href="#name-zone-name-based-on-wifi-ssi" class="section-name selfRef">Zone name based on WiFi SSID</a>
            </h5>
<p id="section-2.1.1.1-1">If the zone being represented is a WiFi network, then the zone name for the network should be constructed using the WiFi SSID followed by 'WiFi.DOMAIN'.  For example, if the SSID is "Example Home" then the zone name would be 'Example Home.WiFi.DOMAIN.' Note that spaces and special characters are allowed in domain names.<a href="#section-2.1.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="zone-name-based-on-thread-network-name">
<section id="section-2.1.1.2">
            <h5 id="name-zone-name-based-on-thread-n">
<a href="#section-2.1.1.2" class="section-number selfRef">2.1.1.2. </a><a href="#name-zone-name-based-on-thread-n" class="section-name selfRef">Zone name based on Thread network name</a>
            </h5>
<p id="section-2.1.1.2-1">If the zone being represented is a Thread [Thread] network, then the zone name for the network should be constructed using the Thread network name. For example, if the Thread network name is "openthread" then the zone name would be 'openthread.thread.DOMAIN.'<a href="#section-2.1.1.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="zone-name-based-on-local-configuration">
<section id="section-2.1.2">
          <h4 id="name-zone-name-based-on-local-co">
<a href="#section-2.1.2" class="section-number selfRef">2.1.2. </a><a href="#name-zone-name-based-on-local-co" class="section-name selfRef">Zone name based on local configuration</a>
          </h4>
<p id="section-2.1.2-1">The above examples assume that it makes sense for each separate subnet to be its own separate zone. However, since SRP guarantees name uniqueness using the first-come, first-served mechanism, it doesn't rely on mDNS's guarantee of per-link uniqueness. Consequently, it is not required that an SRP zone be constrained to the set of services advertised on a single link. For this reason, when it is possible to know that some set of links are all managed by the same set of SRP replication partners, and a name is known for that set of links, that name can be used. To avoid possible collisions, the subdomain 'srp' is used to indicate that this zone is an SRP zone. So in this case the link name would be the locally-known shared name, followed by 'srp.DOMAIN.'<a href="#section-2.1.2-1" class="pilcrow">¶</a></p>
<p id="section-2.1.2-2">An example of such a scenario would be Apple's HomeKit, in which all HomeKit accessories, regardless of which home network link they are attached to, all are shared in the same namespace. Suppose the HomeKit home's name is "Example Home". In such a situation, the domain name 'Example Home.srp.DOMAIN' could be used.<a href="#section-2.1.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="zone-name-based-on-dns-sd-discovery">
<section id="section-2.1.3">
          <h4 id="name-zone-name-based-on-dns-sd-d">
<a href="#section-2.1.3" class="section-number selfRef">2.1.3. </a><a href="#name-zone-name-based-on-dns-sd-d" class="section-name selfRef">Zone name based on DNS-SD discovery</a>
          </h4>
<p id="section-2.1.3-1">Another option for naming the local SRP Replication zone would be to use DNS-SD advertisements. This is particularly useful since each SRP replication partner advertises itself using DNS-SD, so there is a convenient place to put this information. To advertise a zone name based on DNS-SD discovery, the SRP replication partner should add two fields to the TXT record of the service instance. The first field is the domain field: 'domain=name'. This indicates a proposed SRP replication zone name. The second is the join field. If 'join=yes' then other SRP replication servers are encouraged to use the domain name that appears in the domain field rather than creating a new domain.<a href="#section-2.1.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="advertising-ones-own-replication-service">
<section id="section-2.2">
        <h3 id="name-advertising-ones-own-replic">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-advertising-ones-own-replic" class="section-name selfRef">Advertising one's own replication service</a>
        </h3>
<p id="section-2.2-1">An SRP replication service operating in the "routine operation" state (<a href="#routine-operation" class="auto internal xref">Section 2.10</a>) advertises its replication service.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">SRP replication service is advertised using DNS-SD <span>[<a href="#RFC6763" class="cite xref">RFC6763</a>]</span>. The service name is '_srpl-tls._tcp'. Each SRP replication partner should have its own hostname, which when combined with the service instance name and the local DNS-SD domain name will produce a service instance name, for example 'example-host._srpl-tls._tcp.local.' The domain under which the service instance name appears will be 'local' for mDNS, and will be whatever domain is used for service registration in the case of a non-mDNS local DNS-SD service.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2-3">SRP replication uses <span><a href="#RFC7858" class="internal xref">DNS port 853</a> [<a href="#RFC7858" class="cite xref">RFC7858</a>]</span> and is based on <span><a href="#RFC8490" class="internal xref">DNS Stateful Operations</a> [<a href="#RFC8490" class="cite xref">RFC8490</a>]</span>. Therefore, the SRV record for the example we've given would be:<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2-4">example-host._srpl-tls._tcp.local. IN SRV 0 0 853 example-host.local.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<p id="section-2.2-5">The TXT record for SRP replication advertises the following fields:<a href="#section-2.2-5" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2.2-6">
          <dt id="section-2.2-6.1">did</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-6.2">a 64-bit number encoded as hexadecimal ASCII. The dataset ID used by SRP servers to establish a common SRP dataset for a domain as described in <a href="#dataset-id" class="auto internal xref">Section 2.4.2</a>.<a href="#section-2.2-6.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-6.3">join</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-6.4">'yes' or 'no'. Indicates whether other SRP replication servers are invited to join in replicating the dataset.<a href="#section-2.2-6.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-6.5">pid</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-6.6">a 64-bit number encoded as hexadecimal ASCII. The partner ID to uniquely identify a SRP partner, as described in <a href="#partner-id" class="auto internal xref">Section 2.6</a>.<a href="#section-2.2-6.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-2.2-6.7">dn</dt>
          <dd style="margin-left: 1.5em" id="section-2.2-6.8">the domain name that this dataset is intended to represent<a href="#section-2.2-6.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-2.2-7">So in our example, the TXT record might look like this:<a href="#section-2.2-7" class="pilcrow">¶</a></p>
<p id="section-2.2-8">\031dn=openthread.thread.home.arpa.\020did=eb5bb51919a15cec\020pid=2cde2bed200126af\008join=yes<a href="#section-2.2-8" class="pilcrow">¶</a></p>
<p id="section-2.2-9">(Note that each name/value pair in the TXT record is length-encoded, so the '\031`, the two '\020', and the '\008' are the lengths of the name/value pairs.)<a href="#section-2.2-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="discovering-other-replication-services">
<section id="section-2.3">
        <h3 id="name-discovering-other-replicati">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-discovering-other-replicati" class="section-name selfRef">Discovering other replication services</a>
        </h3>
<p id="section-2.3-1">SRP Replication is a cooperative process. In order to ensure cooperation between SRP replication partners on a link, it is necessary that each replication partner be aware of other potential partners. This is accomplished by maintaining a continuous browse for services of the service type "_srpl-tls._tcp".<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">An SRP Replication Partner MUST maintain an ongoing DNS-SD browse on the service name '_srpl-tls._tcp' within the local browsing domain. The ongoing browse will produce two different types of events: 'add' events and 'remove' events. When the browse is started, it should produce an 'add' event for every SRP replication partner currently present on the network, including the partner that is doing the browsing. Whenever a partner goes offline, a 'remove' event should be produced. 'remove' events are not guaranteed, however.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<p id="section-2.3-3">When a new service is added, the SRP partner checks to see if it is in a compatible domain. If the SRP partner has a domain to advertise, it compares that domain to the domain advertised in the added service instance: if they are not the same, then this instance is not a candidate for connection, and should be ignored.<a href="#section-2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="startup">
<section id="section-2.4">
        <h3 id="name-startup">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-startup" class="section-name selfRef">Startup</a>
        </h3>
<p id="section-2.4-1">When a partner starts SRP Replication, it enters the "startup" state and picks a random discovery time interval uniformly selected from the range [MIN_PARNTER_DISCOVERY_INTERVAL, MAX_PARTNER_DISCOVERY_INTERVAL]. The recommended minimum and maximum values are 4 and 7.5 seconds, respectively. The new partner uses the discovery time to (1) discover and determine the preferred dataset ID, (2) find all existing SRPL partners, establish SRPL sessions with them and synchronize with them. The randomness introduced in the start time helps to handle the situation where a group of SRPL partners start around the same time, for example, triggered by a power outage.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.4-2">When the discovery time interval expires, if the partner did not discover any other SRPL partners to synchronize with, it transitions to the "routine operation" state (<a href="#routine-operation" class="auto internal xref">Section 2.10</a>). If it discovers other SRPL partners, it can enter "routine operation" state after one of the following conditions are met for every partner it discovered during the discovery interval:<a href="#section-2.4-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.4-3.1">The new partner has established an SRPL session with the discovered partner and successfully finished initial synchronization (<a href="#initial-synchronization" class="auto internal xref">Section 2.9</a>).<a href="#section-2.4-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.4-3.2">The new partner has failed to establish a connection and synchronize with the discovered partner (on any of its discovered addresses) for at least DISCOVERY_SYNC_TIMEOUT interval since the first connection attempt.  If the DISCOVERY_SYNC_TIMEOUT expires in the middle of an ongoing SRPL session establishment or initial synchronization with the discovered partner, the new partner MUST wait until the initial synchronization is either successfully completed or fails. The recommended value for DISCOVERY_SYNC_TIMEOUT is 5 seconds.<a href="#section-2.4-3.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.4-4">The new partner can start establishing an SRPL session with a discovered partner immediately upon discovering it while in the discovery interval. Therefore, typically by the end of the discovery interval, the condition to enter "routine operation" is already satisfied. The DISCOVERY_SYNC_TIMEOUT handles the situation when a previous partner, which is now offline, is still discovered due to stale cache DNS-SD entries. It ensures that the new partner can enter the "routine operation" state after enough failed attempts. After DISCOVERY_SYNC_TIMEOUT the partner can still try to reconnect with the discovered partner but it does not wait for a successful synchronization with this partner for it to transition to the "routine operation" state.<a href="#section-2.4-4" class="pilcrow">¶</a></p>
<p id="section-2.4-5">Only the partners that are discovered during the discovery interval MUST be considered for the condition when the new partner can enter "routine operation" state. While the new partner can try to synchronize with any partners it discovers after the discovery interval, it does not need to wait to finish synchronization with them before it can enter "routine operation" state. This ensures that the new partner always enters "routine operation" after certain amount of time and new partner discoveries cannot push back the transition to "routine operation" state.<a href="#section-2.4-5" class="pilcrow">¶</a></p>
<section id="section-2.4.1">
          <h4 id="name-determining-an-srp-zone-nam">
<a href="#section-2.4.1" class="section-number selfRef">2.4.1. </a><a href="#name-determining-an-srp-zone-nam" class="section-name selfRef">Determining an SRP zone name</a>
          </h4>
<p id="section-2.4.1-1">An SRPL partner attempts to synchronize with other partners advertising the same domain. If the SRPL partner is not configured with a domain name, and is therefore willing to join an existing domain, it adopts the first domain name with joining enabled it discovers. During the remainder of the discovery time interval, the SRPL partner attempts to synchronize with other partners advertising the same domain name. When the SRPL partner transitions to the "routine operation" state, it will advertise the adopted domain name and sets the 'join=yes' key/value pair in the TXT record.<a href="#section-2.4.1-1" class="pilcrow">¶</a></p>
<p id="section-2.4.1-2">When the discovery time interval expires, if the SRPL partner is not configured with a domain name and was not able to adopt a domain name, it MUST select a zone name using one of the methods mentioned previously in <a href="#naming-of-a-common-service-zone" class="auto internal xref">Section 2.1</a>.<a href="#section-2.4.1-2" class="pilcrow">¶</a></p>
</section>
<div id="dataset-id">
<section id="section-2.4.2">
          <h4 id="name-determining-a-dataset-id">
<a href="#section-2.4.2" class="section-number selfRef">2.4.2. </a><a href="#name-determining-a-dataset-id" class="section-name selfRef">Determining a Dataset ID</a>
          </h4>
<p id="section-2.4.2-1">The dataset ID is a 64-bit number that identifies the set of data replicated by a set of cooperating SRPL partners. Ideally, there should be exactly one dataset ID per domain. However, it is possible for several independent sets of SRPL partners to replicate a particular domain, for example when some SRPL partners are unable to discover each other. When the SRPL partners are able to discover each other again, the sets of partners must converge on a single dataset using the dataset ID.<a href="#section-2.4.2-1" class="pilcrow">¶</a></p>
<p id="section-2.4.2-2">If an SRPL partner does not discover any other partners advertising the same domain in the "startup" state <a href="#startup" class="auto internal xref">Section 2.4</a>, it generates a new dataset ID when entering the "routine operation" state. SRPL partners MUST persist the highest (most significant byte or MSB) of the dataset ID in non-volatile memory. When generating a new dataset ID, the partner MUST increment the MSB of last used dataset ID to use as MSB of new dataset ID and populate the lower 56 bits randomly using a high-quality random number generator <span>[<a href="#RFC4086" class="cite xref">RFC4086</a>]</span>. If there is no previously saved ID, then the partner randomly generates the entire 64-bit ID.<a href="#section-2.4.2-2" class="pilcrow">¶</a></p>
<p id="section-2.4.2-3">When multiple dataset IDs exist for a given domain, the largest dataset ID is the preferred dataset ID. Implementations MUST follow the Serial Number Arithmetic as defined in <span>[<a href="#RFC1982" class="cite xref">RFC1982</a>]</span> when comparing two dataset IDs. When using Serial Number Arithmetic with three or more IDs, it is possible that the largest value may not be well-defined (it is possible to have three IDs each being "larger" than another one). In this case, the dataset ID that is largest using absolute value comparison is the preferred dataset ID.<a href="#section-2.4.2-3" class="pilcrow">¶</a></p>
<p id="section-2.4.2-4">If at any time (regardless of "startup" or "routine operation" state) an SRPL partner discovers that it is synchronizing with a non-preferred dataset ID, it MUST abandon that dataset, re-enter the "startup" state, and attempt to synchronize with the (newly discovered) preferred dataset id.<a href="#section-2.4.2-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="discovering-the-addresses-of-partners">
<section id="section-2.5">
        <h3 id="name-discovering-the-addresses-o">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-discovering-the-addresses-o" class="section-name selfRef">Discovering the addresses of partners</a>
        </h3>
<p id="section-2.5-1">When a partner is discovered, two new ongoing mDNS queries are started on the hostname indicated in the SRV record of the partner: one for A records, and one for AAAA records. Each time an address 'add' event is seen, either for an 'A' record or an 'AAAA' record, the partner adds the address to the list of addresses belonging to that partner.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="partner-id">
<section id="section-2.6">
        <h3 id="name-partner-id">
<a href="#section-2.6" class="section-number selfRef">2.6. </a><a href="#name-partner-id" class="section-name selfRef">Partner ID</a>
        </h3>
<p id="section-2.6-1">The partner ID is a 64-bit number associated with an SRPL partner. Upon entering the "startup" state, the partner MUST generate a random ID using a high-quality random number generator <span>[<a href="#RFC4086" class="cite xref">RFC4086</a>]</span>. If a partner restarts SRP replication operation it MUST select a new random ID.<a href="#section-2.6-1" class="pilcrow">¶</a></p>
<p id="section-2.6-2">The likelihood of partner ID conflict is small. However, if an SRPL partner discovers another partner using the same ID, the partner MUST restart SRP replication operation, which triggers it to pick a new random ID.<a href="#section-2.6-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="establishing-communication-with-a-replication-partner">
<section id="section-2.7">
        <h3 id="name-establishing-communication-">
<a href="#section-2.7" class="section-number selfRef">2.7. </a><a href="#name-establishing-communication-" class="section-name selfRef">Establishing Communication with a replication partner</a>
        </h3>
<p id="section-2.7-1">When an address is added to a partner's address list, the partner first checks to see if the address is one of its own addresses. If so, then the partner is marked "me", and no connection is attempted to it. This is somewhat safer than comparing hostnames, since a hostname collision can result in renaming.<a href="#section-2.7-1" class="pilcrow">¶</a></p>
<p id="section-2.7-2">If the partner is not marked "me", then the partner checks to see if it has an existing connection to that partner. If it does not, then it checks to see whether it has disabled outgoing connections to that partner. If not, then it determines whether it should initiate a connection on the new address.<a href="#section-2.7-2" class="pilcrow">¶</a></p>
<p id="section-2.7-3">While a partner is in the "startup" state (<a href="#startup" class="auto internal xref">Section 2.4</a>) it initiates connections with the other discovered partners. In the "startup" state, the partner does not advertise its SRP replication service so other partners cannot discover it over DNS-SD.<a href="#section-2.7-3" class="pilcrow">¶</a></p>
<p id="section-2.7-4">If the partner is in the "routine operation" state, it uses the partner ID to determine which partner should initiate the connection. If the partner determines that its own partner ID is larger, it MUST initiate the connection. Otherwise, the partner MUST NOT initiate the connection. To determine the larger Partner ID implementations MUST use normal numerical value comparison unlike Dataset ID comparison which uses the Serial Number Arithmetic.<a href="#section-2.7-4" class="pilcrow">¶</a></p>
<p id="section-2.7-5">When a connection fails and if there are multiple addresses associated with partner, the connecting partner advances to the next address in the list. If there are no remaining addresses, the partner sets a timer for RECONNECT_INTERVAL seconds. When this timer expires, it starts again at the beginning of the list and attempts to connect to the first address, iterating again across the list until a connection succeeds or it runs out of addresses.<a href="#section-2.7-5" class="pilcrow">¶</a></p>
<p id="section-2.7-6">Additionally, when an address is added, it is checked against the list of unidentified incoming connections. If a match is found, and the partner is marked "me," then the unidentified connection is removed from the list and dropped. Otherwise, it is attributed to the matching partner, and the protocol is started at the point of receiving an incoming connection.<a href="#section-2.7-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="incoming-connections">
<section id="section-2.8">
        <h3 id="name-incoming-connections">
<a href="#section-2.8" class="section-number selfRef">2.8. </a><a href="#name-incoming-connections" class="section-name selfRef">Incoming connections</a>
        </h3>
<p id="section-2.8-1">When an incoming connection is received, it is checked against the partner list based on the source address of the incoming connection. If the address appears on the list of addresses for a partner, then the connection is attributed to that partner. If there is already an existing connection attributed to the same partner, the partner processing the incoming connection MUST immediately close the existing connection.<a href="#section-2.8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="initial-synchronization">
<section id="section-2.9">
        <h3 id="name-initial-synchronization">
<a href="#section-2.9" class="section-number selfRef">2.9. </a><a href="#name-initial-synchronization" class="section-name selfRef">Initial synchronization</a>
        </h3>
<p id="section-2.9-1">The connecting partner begins the session by sending an SRPL Session message, which includes its partner ID and indicates whether or not it is in the "startup" state. The receiving partner waits to receive the SRPL Session message. If the message indicates that the connecting partner is in the "startup" state, the receiving partner accepts the connection. Otherwise, the receiving partner compares the partner IDs as described in <a href="#establishing-communication-with-a-replication-partner" class="auto internal xref">Section 2.7</a> and accepts the connection if its partner ID is smaller than the connecting partner's ID. If the receiving partner accepts the connection, it MUST send a response to the SRPL Session message and waits for the connecting partner to request a list of update candidates.<a href="#section-2.9-1" class="pilcrow">¶</a></p>
<p id="section-2.9-2">The connecting partner waits for a response to the SRPL Session message, and when it is received, requests that the server send candidates.<a href="#section-2.9-2" class="pilcrow">¶</a></p>
<div id="sending-candidates">
<section id="section-2.9.1">
          <h4 id="name-sending-candidates">
<a href="#section-2.9.1" class="section-number selfRef">2.9.1. </a><a href="#name-sending-candidates" class="section-name selfRef">Sending candidates</a>
          </h4>
<p id="section-2.9.1-1">When a partner receives a "send candidates" message that it is expecting to receive, it generates a candidate list from the list of known SRP clients. This list includes SRP clients that have registered directly with the partner, and SRP clients that have been received through SRP replication updates. Each candidate contains a hostname, a time offset, and a key identifier.<a href="#section-2.9.1-1" class="pilcrow">¶</a></p>
<p id="section-2.9.1-2">The key identifier is computed as follows:<a href="#section-2.9.1-2" class="pilcrow">¶</a></p>
<div class="sourcecode" id="section-2.9.1-3">
<pre>
uint32_t key_id(uint8_t *key_data, int key_len) {
  uint32_t key_id = 0;
  for (int i = 0; i &lt; key_data_len; i += 4) {
    key_id += ((key_data[i] &lt;&lt; 24) | (key_data[i + 1] &lt;&lt; 16) |
               (key_data[i + 2] &lt;&lt; 8) | (key_data[i + 3]));
  }
  return key_id;
}
</pre><a href="#section-2.9.1-3" class="pilcrow">¶</a>
</div>
<p id="section-2.9.1-4">When a partner receives a candidate message during the synchronization process, it first searches for an SRP registration with a hostname that matches the hostname in the candidate message. It then compares the key ID to the key ID in the candidate message. If the key ID doesn't match, it sends back a candidate response status of "conflict". If the key ID does match, it compares the time provided to the time the existing host entry was received. If the time of the update is later, it sends a "send host" response. If it is earlier or the same, it sends a "continue" response. If there is no matching host entry for the candidate message, the partner sends a "send host" response.<a href="#section-2.9.1-4" class="pilcrow">¶</a></p>
<p id="section-2.9.1-5">When a partner receives a candidate response with a status of "send host", it generates a host message, which contains the hostname, the time offset, and the SRP message that was received from the host. The partner then applies the SRP update message as if it had been received directly from the SRP client. The host update time sent by the partner is remembered as the time when the update was received from the client, for the purposes of future synchronization.<a href="#section-2.9.1-5" class="pilcrow">¶</a></p>
<p id="section-2.9.1-6">When a partner is finished iterating across its list of candidates, it sends a "send candidates" response.<a href="#section-2.9.1-6" class="pilcrow">¶</a></p>
<p id="section-2.9.1-7">When a partner receives a "send candidates" response, if it is the server, it sends its own "send candidates" message, and processes any proposed candidates.<a href="#section-2.9.1-7" class="pilcrow">¶</a></p>
<p id="section-2.9.1-8">When a partner that is a server receives a "send candidates" response, it goes into the "routine operation" state. When a partner that is a client sends its "send candidates" response, it goes into the "routine operation" state.<a href="#section-2.9.1-8" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="routine-operation">
<section id="section-2.10">
        <h3 id="name-routine-operation">
<a href="#section-2.10" class="section-number selfRef">2.10. </a><a href="#name-routine-operation" class="section-name selfRef">Routine Operation</a>
        </h3>
<p id="section-2.10-1">During routine operation, whenever an update is successfully processed from an SRP client, the partner that received that update queues that update to be sent to each partner to which it has a connection, whether server or client. If there are no updates pending to a particular client, the update is sent immediately. Otherwise, it's send when the outstanding update is acknowledged.<a href="#section-2.10-1" class="pilcrow">¶</a></p>
<p id="section-2.10-2">When during routine operation a partner receives a host update from its partner, it immediately applies that update to its local SRP zone. This is based on the assumption that a new update is always more current than a copy of the host information in its database.<a href="#section-2.10-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<section id="section-3">
      <h2 id="name-protocol-details">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-protocol-details" class="section-name selfRef">Protocol Details</a>
      </h2>
<p id="section-3-1">The DNS-SD SRP Replication Protocol (henceforth SRPL) is based on <span><a href="#RFC8490" class="internal xref">DNS Stateful Operations</a> [<a href="#RFC8490" class="cite xref">RFC8490</a>]</span>. Each SRP replication partner creates a listener on port 853, the <span><a href="#RFC7858" class="internal xref">DNS-over-TLS</a> [<a href="#RFC7858" class="cite xref">RFC7858</a>]</span> reserved port. This listener can be used for other DNS requests as well.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Participants in the protocol are partners. To distinguish between partners, the terms "partner" and "remote partner" are used. "Partner" refers to the partner that is communicating or receiving communication. "Remote partner" refers to the other partner. Partners can be clients or servers: a partner that has established a connection to another one is a client; a partner that has received a connection from another one is a server.<a href="#section-3-2" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-dns-stateful-operations-con">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-dns-stateful-operations-con" class="section-name selfRef">DNS Stateful Operations considerations</a>
        </h3>
<p id="section-3.1-1">DNS Stateful Operations is a DNS per-connection session management protocol. DNS Push session management includes session establishment as well as session maintenance.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<section id="section-3.1.1">
          <h4 id="name-dso-session-establishment">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-dso-session-establishment" class="section-name selfRef">DSO Session Establishment</a>
          </h4>
<p id="section-3.1.1-1">An DSO session for an SRPL connection can be established either by simply sending the first SRPL message, or by sending a DSO Keepalive message. <span><a href="https://rfc-editor.org/rfc/rfc8490#section-5.1" class="relref">Section 5.1</a> of [<a href="#RFC8490" class="cite xref">RFC8490</a>]</span>.<a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-3.1.2">
          <h4 id="name-dso-session-maintenance">
<a href="#section-3.1.2" class="section-number selfRef">3.1.2. </a><a href="#name-dso-session-maintenance" class="section-name selfRef">DSO Session maintenance</a>
          </h4>
<p id="section-3.1.2-1">DSO sessions can be active or idle. As long as the SRPL protocol is active on a connection, the DSO state of the connection is active. DSO sessions require occasional keepalive messages. The default of fifteen seconds is adequate for SRPL.<a href="#section-3.1.2-1" class="pilcrow">¶</a></p>
<p id="section-3.1.2-2">An idle DSO session must persist for long enough that there is a chance for the browse that identifies it to succeed. Therefore, the minimum DSO session inactivity timeout is 2*UNIDENTIFIED_PARTNER_TIMEOUT seconds.<a href="#section-3.1.2-2" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.2">
        <h3 id="name-srpl-messages">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-srpl-messages" class="section-name selfRef">SRPL Messages</a>
        </h3>
<p id="section-3.2-1">SRPL uses the DSO message format. Each message begins with a Primary TLV and may contain secondary TLVs with additional information (<span><a href="https://rfc-editor.org/rfc/rfc8490#section-5.4" class="relref">Section 5.4</a> of [<a href="#RFC8490" class="cite xref">RFC8490</a>]</span>). SRPL uses DSO request and response message types. A partner receiving a DSO request is expected to send a DSO response with same Primary TLV. SRPL does not define or use any unidirectional DSO message.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">To ensure future compatibility, when processing a received SRPL message, any unrecognized secondary TLVs or additional value in currently defined SRPL TLVs MUST be silently ignored, and the message is interpreted and handled as if the unrecognized parts were not present (<span><a href="https://rfc-editor.org/rfc/rfc8490#section-5.4.5" class="relref">Section 5.4.5</a> of [<a href="#RFC8490" class="cite xref">RFC8490</a>]</span>). However, if a partner receives an SRPL message that does not satisfy the message format and processing rules specified below, it MUST treat this as a "fatal error" and forcibly abort the connection immediately (<span><a href="https://rfc-editor.org/rfc/rfc8490#section-5.3.1" class="relref">Section 5.3.1</a> of [<a href="#RFC8490" class="cite xref">RFC8490</a>]</span>).<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">The SRPL messages and their corresponding Primary TLVs are as follows:<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<section id="section-3.2.1">
          <h4 id="name-srpl-session">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-srpl-session" class="section-name selfRef">SRPL Session</a>
          </h4>
<p id="section-3.2.1-1">DSO-TYPE code: SRPLSession. Introduces the SRPL session. The SRPL session TLV contains the partner ID as an unsigned 64-bit value. A SRPL Session request may include an SRPL New Partner secondary TLV. Inclusion of the SRPL New Partner TLV indicates whether the partner is in the "startup" state.<a href="#section-3.2.1-1" class="pilcrow">¶</a></p>
<section id="section-3.2.1.1">
            <h5 id="name-srpl-client-behavior">
<a href="#section-3.2.1.1" class="section-number selfRef">3.2.1.1. </a><a href="#name-srpl-client-behavior" class="section-name selfRef">SRPL client behavior</a>
            </h5>
<p id="section-3.2.1.1-1">The SRPL Session request is sent by a partner acting as a client to its remote partner once the TLS connection to the partner, acting as a server, has succeeded. The SRPL Session request establishes the DSO connection as an SRPL protocol connection. If it is the first DSO message sent by the partner acting as a client, then it also establishes the DSO session.<a href="#section-3.2.1.1-1" class="pilcrow">¶</a></p>
<p id="section-3.2.1.1-2">When the SRPL partner acting as a client receives a response to its SRPL Session message from server, it MUST send an SRPL Send Candidates request.<a href="#section-3.2.1.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.1.2">
            <h5 id="name-srpl-server-behavior">
<a href="#section-3.2.1.2" class="section-number selfRef">3.2.1.2. </a><a href="#name-srpl-server-behavior" class="section-name selfRef">SRPL server behavior</a>
            </h5>
<p id="section-3.2.1.2-1">An SRPL partner acting as a server that receives an SRPL Session request checks to see if the SRPL session on which it was received is already established. If so, this is a protocol error, and the SRPL partner MUST drop the connection.<a href="#section-3.2.1.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2.1.2-2">If the SRPL Session request is establishing a new session, the server MUST send a SRPL Session response if either of the following conditions are satisfied:<a href="#section-3.2.1.2-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.1.2-3.1">The SRPL Session request contains an SRPL New Partner secondary TLV.<a href="#section-3.2.1.2-3.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.2.1.2-3.2">The SRPL Session request contains a partner ID that is larger than the server's (see <a href="#establishing-communication-with-a-replication-partner" class="auto internal xref">Section 2.7</a>).<a href="#section-3.2.1.2-3.2" class="pilcrow">¶</a>
</li>
            </ul>
<p id="section-3.2.1.2-4">If none of these conditions are satisfied, this is a protocol error, and the SRPL partner MUST drop the connection.<a href="#section-3.2.1.2-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.2.2">
          <h4 id="name-srpl-send-candidates">
<a href="#section-3.2.2" class="section-number selfRef">3.2.2. </a><a href="#name-srpl-send-candidates" class="section-name selfRef">SRPL Send Candidates</a>
          </h4>
<p id="section-3.2.2-1">DSO-TYPE code: SRPLSendCandidates. Requests the remote partner to send its candidates list. The SRPL Send Candidates TLV contains no value. The SRPL Send Candidates message does not include any secondary TLVs.<a href="#section-3.2.2-1" class="pilcrow">¶</a></p>
<section id="section-3.2.2.1">
            <h5 id="name-srpl-client-behavior-2">
<a href="#section-3.2.2.1" class="section-number selfRef">3.2.2.1. </a><a href="#name-srpl-client-behavior-2" class="section-name selfRef">SRPL client behavior</a>
            </h5>
<p id="section-3.2.2.1-1">An SRPL partner acting as a client MUST send an SRPL Send Candidates request after it has received an SRPL Session response. It MUST NOT send this request at any other time.<a href="#section-3.2.2.1-1" class="pilcrow">¶</a></p>
<p id="section-3.2.2.1-2">An SRPL partner acting as a client expects to receive an SRPL Send Candidates message after it has received an SRPL Send Candidates response. If it receives an SRPL Send Candidates message at any other time, this is a protocol error, and the SRPL partner should drop its connection to the server.<a href="#section-3.2.2.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.2.2">
            <h5 id="name-srpl-server-behavior-2">
<a href="#section-3.2.2.2" class="section-number selfRef">3.2.2.2. </a><a href="#name-srpl-server-behavior-2" class="section-name selfRef">SRPL server behavior</a>
            </h5>
<p id="section-3.2.2.2-1">An SRPL partner acting as a server expects to receive an SRPL Send Candidates request after it has sent an SRPL Session response. If it receives an SRPL Candidates request at any other time, this is a protocol error, and it MUST drop the connection.<a href="#section-3.2.2.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2.2.2-2">An SRPL partner acting as a server MUST send an SRPL Send Candidates request after it has sent an SRPL Send Candidates response.<a href="#section-3.2.2.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2.2.2-3">An SRPL partner acting as a server MUST enter the "normal operations" state after receiving an SRPL Send Candidates response from its partner.<a href="#section-3.2.2.2-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.2.3">
          <h4 id="name-srpl-candidate">
<a href="#section-3.2.3" class="section-number selfRef">3.2.3. </a><a href="#name-srpl-candidate" class="section-name selfRef">SRPL Candidate</a>
          </h4>
<p id="section-3.2.3-1">DSO-TYPE code: SRPLCandidate. Announces the availability of a specific candidate SRP client registration. The SRPL Candidate TLV contains no value.<a href="#section-3.2.3-1" class="pilcrow">¶</a></p>
<section id="section-3.2.3.1">
            <h5 id="name-required-secondary-tlvs">
<a href="#section-3.2.3.1" class="section-number selfRef">3.2.3.1. </a><a href="#name-required-secondary-tlvs" class="section-name selfRef">Required secondary TLVs</a>
            </h5>
<p id="section-3.2.3.1-1">The SRPL Candidate request MUST include the following secondary TLVs: SRPL Hostname, SRPL Time Offset, and SRPL Key ID.<a href="#section-3.2.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.2.3.1-2">The SRPL Candidate response MUST include exactly one of the following status TLVs: SRPL Candidate Yes, SRPL Candidate No, or SRPL Conflict.<a href="#section-3.2.3.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.3.2">
            <h5 id="name-srpl-partner-common-behavio">
<a href="#section-3.2.3.2" class="section-number selfRef">3.2.3.2. </a><a href="#name-srpl-partner-common-behavio" class="section-name selfRef">SRPL partner common behavior</a>
            </h5>
<p id="section-3.2.3.2-1">SRPL partners expect to receive SRPL Candidate messages between the time that they have sent an SRPL Send Candidates request message and the time that they have received an SRPL Send Candidates response. If an SRPL Candidate message is received at any other time, this is a protocol error, and the partner MUST drop the connection.<a href="#section-3.2.3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2.3.2-2">Partners MUST NOT send SRPL Candidate requests if they have sent any SRPL Candidate or SRPL host requests that have not yet received responses. Partners receiving SRPL Candidate requests when they have not yet responded to an outstanding SRPL Candidate request or SRPL Host request MUST treat this as a protocol failure and drop the connection.<a href="#section-3.2.3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2.3.2-3">When a partner receives a valid SRPL Candidate message, it checks its SRP registration database for a host that matches both the SRPL Hostname and SRPL Key ID TLVs. If such a match is not found, the partner sends an SRPL Candidate response that includes the SRPL Candidate Yes secondary TLV.<a href="#section-3.2.3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2.3.2-4">If a match is found for the hostname, but the Key ID doesn't match, this is a conflict, and the partner sends an SRPL Candidate response with the SRPL Conflict secondary TLV.<a href="#section-3.2.3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2.3.2-5">If a match is found for the hostname, and the key ID matches, then the partner computes the update time of the candidate by subtracting the value of the SRPL Time Offset TLV from the current time in seconds. This computation should be done when the SRPL Candidate message is received to avoid clock skew. If 'candidate update time' - 'local update time' is greater than SRPL_UPDATE_SKEW_WINDOW, then the candidate update is more recent than the current SRP registration. In this case, the partner sends an SRPL Candidate response and includes the SRPL Candidate Yes secondary TLV. The reason for adding in some skew is to account for network transmission delays.<a href="#section-3.2.3.2-5" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3.2.4">
          <h4 id="name-srpl-host">
<a href="#section-3.2.4" class="section-number selfRef">3.2.4. </a><a href="#name-srpl-host" class="section-name selfRef">SRPL Host</a>
          </h4>
<p id="section-3.2.4-1">DSO-TYPE code: SRPLHost. Provides the content of a particular SRP client registration. The SRPL Host TLV contains no value.<a href="#section-3.2.4-1" class="pilcrow">¶</a></p>
<section id="section-3.2.4.1">
            <h5 id="name-required-secondary-tlvs-2">
<a href="#section-3.2.4.1" class="section-number selfRef">3.2.4.1. </a><a href="#name-required-secondary-tlvs-2" class="section-name selfRef">Required secondary TLVs</a>
            </h5>
<p id="section-3.2.4.1-1">The SRPL Host request MUST include as secondary TLVs one or more SRPL Host Message TLVs. If an SRPL partner receives an SRPL Candidate request that doesn't contain at least one SRPL Host Message TLV, this is a protocol error, and the partner MUST drop the connection.<a href="#section-3.2.4.1-1" class="pilcrow">¶</a></p>
<p id="section-3.2.4.1-2">The SRPL Host request MUST always include at least one SRPL Host Message TLV, which contains the most recent update the SRP server has received for that host. However, in some cases an update for a host may update some, but not all, service instances that reference that host; in this case, the SRPL Host request MUST include all of the previously received SRP updates that would be required to reconstruct the current state of the host registration on the server sending the SRPL Host request. SRPL Host Message TLVs MUST be ordered starting with the largest time offset and ending with the smallest time offset.<a href="#section-3.2.4.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.4.2">
            <h5 id="name-srpl-partner-common-behavior">
<a href="#section-3.2.4.2" class="section-number selfRef">3.2.4.2. </a><a href="#name-srpl-partner-common-behavior" class="section-name selfRef">SRPL partner common behavior during synchronization</a>
            </h5>
<p id="section-3.2.4.2-1">SRPL partners expect to receive either zero or one SRPL Host requests after sending an SRPL Candidate response with a SRPL Candidate Yes secondary TLV. If an SRPL Host request is received at any other time during initial synchronization, this is a protocol error, and the partner MUST drop the connection. The only time that an SRPL Host request would <em>not</em> follow a positive SRPL Candidate response would be when the candidate host entry's lease expired after the SRPL Candidate request was sent but before the SRPL Candidate response was received.<a href="#section-3.2.4.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2.4.2-2">SRPL partners send SRPL Host requests during synchronization when a valid SRPL Candidate response has been received that includes an SRPL Candidate Yes secondary TLV. The host request is generated based on the current candidate (the one for which the SRPL Candidate request being responded to was send).<a href="#section-3.2.4.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.4.3">
            <h5 id="name-srpl-partner-common-behavior-">
<a href="#section-3.2.4.3" class="section-number selfRef">3.2.4.3. </a><a href="#name-srpl-partner-common-behavior-" class="section-name selfRef">SRPL partner common behavior during routine operations</a>
            </h5>
<p id="section-3.2.4.3-1">When an SRPL partner during routine operations receives and has successfully validated an SRP update from an SRP client, it MUST send that update to each of its connected partners as an SRPL Host request. If the connection to a particular partner is not busy, and there are no updates already queued to be sent, it MUST send the SRPL Host message immediately. Otherwise, it MUST queue the update to send when possible. The queue MUST be first-in, first-out.<a href="#section-3.2.4.3-1" class="pilcrow">¶</a></p>
<p id="section-3.2.4.3-2">After an SRPL partner has sent an SRPL Host request to a partner, and before it receives a corresponding SRPL Host response, it MUST NOT send any more SRPL Host messages to that partner.<a href="#section-3.2.4.3-2" class="pilcrow">¶</a></p>
<p id="section-3.2.4.3-3">When an SRPL partner receives an SRPL Host request during routine operations, it MUST apply it immediately. While it is being applied, it MUST NOT send any other SRPL Host requests to that partner.<a href="#section-3.2.4.3-3" class="pilcrow">¶</a></p>
<p id="section-3.2.4.3-4">When an SRPL Host request has been successfully applied by an SRPL partner, the partner MUST send an SRPL Host response.<a href="#section-3.2.4.3-4" class="pilcrow">¶</a></p>
<p id="section-3.2.4.3-5">If an SRPL partner receives an SRPL Host request while another SRPL Host request is being processed, this is a protocol error, and the partner MUST drop the connection to its partner.<a href="#section-3.2.4.3-5" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<section id="section-3.3">
        <h3 id="name-dso-secondary-tlvs">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-dso-secondary-tlvs" class="section-name selfRef">DSO Secondary TLVs</a>
        </h3>
<p id="section-3.3-1">In addition to the Primary TLVs used to send requests between SRPL partners, we define secondary TLVs to carry additional information needed for various SRPL requests.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<section id="section-3.3.1">
          <h4 id="name-srpl-candidate-yes">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-srpl-candidate-yes" class="section-name selfRef">SRPL Candidate Yes</a>
          </h4>
<p id="section-3.3.1-1">DSO-TYPE code: SRPLCandidateYes. It contains no value. In an SRPL Candidate response, indicates to the partner that an SRPL Host message for the candidate is wanted and should be sent.<a href="#section-3.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1-2">Appears as a secondary TLV in SRPL Candidate responses. MUST NOT appear in any other SRPL request or response. MUST NOT appear in addition to either SRPL Conflict or SRPL Candidate No secondary TLVs.<a href="#section-3.3.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.2">
          <h4 id="name-srpl-candidate-no">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-srpl-candidate-no" class="section-name selfRef">SRPL Candidate No</a>
          </h4>
<p id="section-3.3.2-1">DSO-TYPE code: SRPLCandidateNo. It contains no value. In an SRPL Candidate response, indicates to the partner that an SRPL Host message for the candidate is not wanted and should not be sent.<a href="#section-3.3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.3.2-2">Appears as a secondary TLV in SRPL Candidate responses. MUST NOT appear in any other SRPL request or response. MUST NOT appear in addition to either SRPL Conflict or SRPL Candidate Yes secondary TLVs.<a href="#section-3.3.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.3">
          <h4 id="name-srpl-conflict">
<a href="#section-3.3.3" class="section-number selfRef">3.3.3. </a><a href="#name-srpl-conflict" class="section-name selfRef">SRPL Conflict</a>
          </h4>
<p id="section-3.3.3-1">DSO-TYPE code: SRPLConflict. It contains no value. In an SRPL Candidate response, indicates to the partner that an SRPL Host message for the candidate is not wanted and should not be sent. Additionally indicates that the proposed host conflicts with local data. This indication is informative and has no effect on processing.<a href="#section-3.3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3.3-2">Appears as a secondary TLV in SRPL Candidate responses. MUST NOT appear in any other SRPL request or response. MUST NOT appear in addition to either SRPL Candidate Yes or SRPL Candidate No secondary TLVs.<a href="#section-3.3.3-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.4">
          <h4 id="name-srpl-hostname">
<a href="#section-3.3.4" class="section-number selfRef">3.3.4. </a><a href="#name-srpl-hostname" class="section-name selfRef">SRPL Hostname</a>
          </h4>
<p id="section-3.3.4-1">DSO-TYPE code: SRPLHostname. In an SRPL Candidate request, indicates to the partner the hostname of an SRP registration. The TLV value is the hostname represented in DNS wire format <span><a href="https://rfc-editor.org/rfc/rfc1035#section-3.1" class="relref">Section 3.1</a> of [<a href="#RFC1035" class="cite xref">RFC1035</a>]</span>.<a href="#section-3.3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.3.4-2">Required as a secondary TLV in SRPL Candidate requests. MUST NOT appear in any other SRPL request or response.<a href="#section-3.3.4-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.5">
          <h4 id="name-srpl-host-message">
<a href="#section-3.3.5" class="section-number selfRef">3.3.5. </a><a href="#name-srpl-host-message" class="section-name selfRef">SRPL Host Message</a>
          </h4>
<p id="section-3.3.5-1">DSO-TYPE code: SRPLHostMessage. In an SRPL Host request, conveys four data objects in order:<a href="#section-3.3.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.3.5-2.1">the lease time and key lease time returned to the client, represented as two unsigned 32-bit numbers in units of seconds.<a href="#section-3.3.5-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.5-2.2">the time offset at which the message was received, represented as a 32-bit unsigned number of seconds. The time offset is computed as the difference between the time when the SRPL Host Message TLV is being constructed for transmission, and the time when the SRP update contained in the SRPL Host Message was received.<a href="#section-3.3.5-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.3.5-2.3">the SRP Update message received from the SRP client. This contains the contents of the message, but not any IP, UDP, TCP or TLS headers that may have encapsulated it.<a href="#section-3.3.5-2.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-3.3.5-3">The content of the SRPL Host Message is used to update the host on the partner receiving the request. Note that the SRP message being sent can't be modified by the SRPL partner sending it, so in order to validate the message (assuming that the signature includes a nonzero time), the validation process should adjust the current time by the time offset included in the SRPL Time Offset TLV when comparing against the signature time when checking for replay attacks. The computation of the current time of signing should be done when the message is received to avoid clock skew that might result from processing delays.<a href="#section-3.3.5-3" class="pilcrow">¶</a></p>
<p id="section-3.3.5-4">Required as a secondary TLV in SRPL Host requests. MUST NOT appear in any other SRPL request or response.<a href="#section-3.3.5-4" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.6">
          <h4 id="name-srpl-time-offset">
<a href="#section-3.3.6" class="section-number selfRef">3.3.6. </a><a href="#name-srpl-time-offset" class="section-name selfRef">SRPL Time Offset</a>
          </h4>
<p id="section-3.3.6-1">DSO-TYPE code: SRPLTimeOffset. In an SRPL Candidate request, conveys the difference between the time the SRP update was received from the SRP client and the current time on the partner generating the request, in seconds. The time offset value is represented as an unsigned 32-bit value<a href="#section-3.3.6-1" class="pilcrow">¶</a></p>
<p id="section-3.3.6-2">Required as a secondary TLV in SRPL Candidate requests. MUST NOT appear in any other SRPL request or response.<a href="#section-3.3.6-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.7">
          <h4 id="name-srpl-key-id">
<a href="#section-3.3.7" class="section-number selfRef">3.3.7. </a><a href="#name-srpl-key-id" class="section-name selfRef">SRPL Key ID</a>
          </h4>
<p id="section-3.3.7-1">DSO-TYPE code: SRPLKeyID. In an SRPL Candidate request, conveys the key ID of the SRP client. The value is an unsigned 32-bit number and calculated as described in <a href="#sending-candidates" class="auto internal xref">Section 2.9.1</a>.<a href="#section-3.3.7-1" class="pilcrow">¶</a></p>
<p id="section-3.3.7-2">Required as a secondary TLV in SRPL Candidate requests. MUST NOT appear in any other SRPL request or response.<a href="#section-3.3.7-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3.8">
          <h4 id="name-srpl-new-partner">
<a href="#section-3.3.8" class="section-number selfRef">3.3.8. </a><a href="#name-srpl-new-partner" class="section-name selfRef">SRPL New Partner</a>
          </h4>
<p id="section-3.3.8-1">DSO-TYPE code: SRPLNewPartnter. It contains no value. When included in an SRPL Session request, indicates that the partner is in the "startup" state.<a href="#section-3.3.8-1" class="pilcrow">¶</a></p>
<p id="section-3.3.8-2">Can be optionally included as a secondary TLV in SRPL Session requests. MUST NOT appear in any other SRPL request or response.<a href="#section-3.3.8-2" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<div id="security-considerations">
<section id="section-4">
      <h2 id="name-security-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-4-1">SRP replication basically relies on the trustworthiness of hosts on the local network. Since SRP itself relies on the same level of trust, SRP replication doesn't make things worse. However, when the option to have a central SRP server is available, that is likely to be more trustworthy.<a href="#section-4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="delegation">
<section id="section-5">
      <h2 id="name-delegation-of-localarpa">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-delegation-of-localarpa" class="section-name selfRef">Delegation of 'local.arpa.'</a>
      </h2>
<p id="section-5-1">In order to be fully functional, the owner of the 'arpa.' zone must add a delegation of 'local.arpa.' in the '.arpa.'
        zone <span>[<a href="#RFC3172" class="cite xref">RFC3172</a>]</span>. This delegation should be set up as was done for 'home.arpa', as a result of the
        specification in <span><a href="https://rfc-editor.org/rfc/rfc8375#section-7" class="relref">Section 7</a> of [<a href="#RFC8375" class="cite xref">RFC8375</a>]</span>.<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-6">
      <h2 id="name-iana-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-srpl-tls-service-name">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-srpl-tls-service-name" class="section-name selfRef">'srpl-tls' Service Name</a>
        </h3>
<p id="section-6.1-1">IANA is requested to add a new entry to the Service Names and Port Numbers
          registry for srpl-tls with a transport type of tcp.  No port number is to be assigned.
          The reference should be to this document, and the Assignee and Contact information should
          reference the authors of this document.  The Description should be as follows:<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">Availability of DNS-SD SRP Replication Service for a given domain is advertised using the "_srpl‑tls._tcp.&lt;domain&gt;." SRV record gives the target host and port where DNS-SD SRP Replication Service is provided for the named domain.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-6.2">
        <h3 id="name-dso-tlv-type-code">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-dso-tlv-type-code" class="section-name selfRef">DSO TLV type code</a>
        </h3>
<p id="section-6.2-1">The IANA is requested to add the following entries to the 16-bit DSO Type Code Registry. Each type mnemonic should be replaced with an allocated type code, both in this table and elsewhere in the document. RFC-TBD should be replaced with the name of this document once it becomes an RFC.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Type</td>
              <td class="text-left" rowspan="1" colspan="1">Name</td>
              <td class="text-left" rowspan="1" colspan="1">Early Data</td>
              <td class="text-left" rowspan="1" colspan="1">Status</td>
              <td class="text-left" rowspan="1" colspan="1">Reference</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLSession</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Session</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLSendCandidates</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Send Candidates</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLCandidate</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Candidate</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLHost</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Host</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLCandidateYes</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Candidate Yes</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLCandidateNo</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Candidate No</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLConflict</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Conflict</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLHostname</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Hostname</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLHostMessage</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Host Message</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLTimeOffset</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Time Offset</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLKeyID</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL Key ID</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">SRPLNewPartnter</td>
              <td class="text-left" rowspan="1" colspan="1">SRPL New Partner</td>
              <td class="text-left" rowspan="1" colspan="1">No</td>
              <td class="text-left" rowspan="1" colspan="1">STD</td>
              <td class="text-left" rowspan="1" colspan="1">RFC-TBD</td>
            </tr>
          </tbody>
        </table>
</section>
<section id="section-6.3">
        <h3 id="name-registration-and-delegation">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-registration-and-delegation" class="section-name selfRef">Registration and Delegation of 'local.arpa' as a Special-Use Domain Name</a>
        </h3>
<p id="section-6.3-1">IANA is requested to record the domain name local.arpa.' in the Special-Use Domain Names registry
          <span>[<a href="#SUDN" class="cite xref">SUDN</a>]</span>. IANA is requested, with the approval of IAB, to implement the delegation requested in
          <a href="#delegation" class="auto internal xref">Section 5</a>.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">IANA is further requested to add a new entry to the "Transport-Independent Locally-Served Zones" subregistry of the the "Locally-Served DNS Zones" registry <span>[<a href="#LSDZ" class="cite xref">LSDZ</a>]</span>.  The entry will be for the domain local.arpa.' with the description "Ad-hoc DNS-SD Special-Use Domain", listing this document as the reference.<a href="#section-6.3-2" class="pilcrow">¶</a></p>
</section>
</section>
</div>
<section id="section-7">
      <h2 id="name-informative-references">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
    </h2>
</section>
<section id="section-8">
      <h2 id="name-normative-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC1035">[RFC1035]</dt>
      <dd>
<span class="refAuthor">Mockapetris, P.</span>, <span class="refTitle">"Domain names - implementation and specification"</span>, <span class="seriesInfo">STD 13</span>, <span class="seriesInfo">RFC 1035</span>, <span class="seriesInfo">DOI 10.17487/RFC1035</span>, <time datetime="1987-11" class="refDate">November 1987</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1035">https://www.rfc-editor.org/info/rfc1035</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1982">[RFC1982]</dt>
      <dd>
<span class="refAuthor">Elz, R.</span> and <span class="refAuthor">R. Bush</span>, <span class="refTitle">"Serial Number Arithmetic"</span>, <span class="seriesInfo">RFC 1982</span>, <span class="seriesInfo">DOI 10.17487/RFC1982</span>, <time datetime="1996-08" class="refDate">August 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1982">https://www.rfc-editor.org/info/rfc1982</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3172">[RFC3172]</dt>
      <dd>
<span class="refAuthor">Huston, G., Ed.</span>, <span class="refTitle">"Management Guidelines &amp; Operational Requirements for the Address and Routing Parameter Area Domain ("arpa")"</span>, <span class="seriesInfo">BCP 52</span>, <span class="seriesInfo">RFC 3172</span>, <span class="seriesInfo">DOI 10.17487/RFC3172</span>, <time datetime="2001-09" class="refDate">September 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3172">https://www.rfc-editor.org/info/rfc3172</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4086">[RFC4086]</dt>
      <dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refAuthor">Schiller, J.</span>, and <span class="refAuthor">S. Crocker</span>, <span class="refTitle">"Randomness Requirements for Security"</span>, <span class="seriesInfo">BCP 106</span>, <span class="seriesInfo">RFC 4086</span>, <span class="seriesInfo">DOI 10.17487/RFC4086</span>, <time datetime="2005-06" class="refDate">June 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4086">https://www.rfc-editor.org/info/rfc4086</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6763">[RFC6763]</dt>
      <dd>
<span class="refAuthor">Cheshire, S.</span> and <span class="refAuthor">M. Krochmal</span>, <span class="refTitle">"DNS-Based Service Discovery"</span>, <span class="seriesInfo">RFC 6763</span>, <span class="seriesInfo">DOI 10.17487/RFC6763</span>, <time datetime="2013-02" class="refDate">February 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6763">https://www.rfc-editor.org/info/rfc6763</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7858">[RFC7858]</dt>
      <dd>
<span class="refAuthor">Hu, Z.</span>, <span class="refAuthor">Zhu, L.</span>, <span class="refAuthor">Heidemann, J.</span>, <span class="refAuthor">Mankin, A.</span>, <span class="refAuthor">Wessels, D.</span>, and <span class="refAuthor">P. Hoffman</span>, <span class="refTitle">"Specification for DNS over Transport Layer Security (TLS)"</span>, <span class="seriesInfo">RFC 7858</span>, <span class="seriesInfo">DOI 10.17487/RFC7858</span>, <time datetime="2016-05" class="refDate">May 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7858">https://www.rfc-editor.org/info/rfc7858</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8375">[RFC8375]</dt>
      <dd>
<span class="refAuthor">Pfister, P.</span> and <span class="refAuthor">T. Lemon</span>, <span class="refTitle">"Special-Use Domain 'home.arpa.'"</span>, <span class="seriesInfo">RFC 8375</span>, <span class="seriesInfo">DOI 10.17487/RFC8375</span>, <time datetime="2018-05" class="refDate">May 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8375">https://www.rfc-editor.org/info/rfc8375</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8490">[RFC8490]</dt>
      <dd>
<span class="refAuthor">Bellis, R.</span>, <span class="refAuthor">Cheshire, S.</span>, <span class="refAuthor">Dickinson, J.</span>, <span class="refAuthor">Dickinson, S.</span>, <span class="refAuthor">Lemon, T.</span>, and <span class="refAuthor">T. Pusateri</span>, <span class="refTitle">"DNS Stateful Operations"</span>, <span class="seriesInfo">RFC 8490</span>, <span class="seriesInfo">DOI 10.17487/RFC8490</span>, <time datetime="2019-03" class="refDate">March 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8490">https://www.rfc-editor.org/info/rfc8490</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SUDN">[SUDN]</dt>
      <dd>
<span class="refTitle">"Special-Use Domain Names Registry"</span>, <time datetime="2012-07" class="refDate">July 2012</time>, <span>&lt;<a href="https://www.iana.org/assignments/special-use-domain-names/special-use-domain-names.xhtml">https://www.iana.org/assignments/special-use-domain-names/special-use-domain-names.xhtml</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="LSDZ">[LSDZ]</dt>
    <dd>
<span class="refTitle">"Locally-Served DNS Zones Registry"</span>, <time datetime="2011-07" class="refDate">July 2011</time>, <span>&lt;<a href="https://www.iana.org/assignments/locally-served-dns-zones/locally-served-dns-zones.xhtml">https://www.iana.org/assignments/locally-served-dns-zones/locally-served-dns-zones.xhtml</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ted Lemon</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino</span>, <span class="region">California</span> <span class="postal-code">95014</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mellon@fugue.com" class="email">mellon@fugue.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Abtin Keshavarzian</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div dir="auto" class="left"><span class="street-address">1600 Amphitheatre Parkway CA 94043</span></div>
<div dir="auto" class="left">
<span class="locality">Mountain View</span>, <span class="region">California</span> <span class="postal-code">94043</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:abtink@google.com" class="email">abtink@google.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jonathan Hui</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div dir="auto" class="left"><span class="street-address">1600 Amphitheatre Parkway CA 94043</span></div>
<div dir="auto" class="left">
<span class="locality">Mountain View</span>, <span class="region">California</span> <span class="postal-code">94043</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jonhui@google.com" class="email">jonhui@google.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
