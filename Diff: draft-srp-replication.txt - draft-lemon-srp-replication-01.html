
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<!-- Generated by rfcdiff 1.48: rfcdiff  --> 
<!-- <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional" > -->
<!-- System: Linux dechaunac 3.2.0-6-amd64 #1 SMP Debian 3.2.102-1 x86_64 GNU/Linux --> 
<!-- Using awk: /usr/bin/gawk: GNU Awk 4.1.1, API: 1.1 (GNU MPFR 3.1.3, GNU MP 6.0.0) --> 
<!-- Using diff: /usr/bin/diff: diff (GNU diffutils) 3.3 --> 
<!-- Using wdiff: /usr/bin/wdiff: wdiff (GNU wdiff) 1.2.2 --> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <meta http-equiv="Content-Style-Type" content="text/css" /> 
  <title>Diff: draft-srp-replication.txt - draft-lemon-srp-replication-01.txt</title> 
  <style type="text/css"> 
    body    { margin: 0.4ex; margin-right: auto; } 
    tr      { } 
    td      { white-space: pre; font-family: monospace; vertical-align: top; font-size: 0.86em;} 
    th      { font-size: 0.86em; } 
    .small  { font-size: 0.6em; font-style: italic; font-family: Verdana, Helvetica, sans-serif; } 
    .left   { background-color: #EEE; } 
    .right  { background-color: #FFF; } 
    .diff   { background-color: #CCF; } 
    .lblock { background-color: #BFB; } 
    .rblock { background-color: #FF8; } 
    .insert { background-color: #8FF; } 
    .delete { background-color: #ACF; } 
    .void   { background-color: #FFB; } 
    .cont   { background-color: #EEE; } 
    .linebr { background-color: #AAA; } 
    .lineno { color: red; background-color: #FFF; font-size: 0.7em; text-align: right; padding: 0 2px; } 
    .elipsis{ background-color: #AAA; } 
    .left .cont { background-color: #DDD; } 
    .right .cont { background-color: #EEE; } 
    .lblock .cont { background-color: #9D9; } 
    .rblock .cont { background-color: #DD6; } 
    .insert .cont { background-color: #0DD; } 
    .delete .cont { background-color: #8AD; } 
    .stats, .stats td, .stats th { background-color: #EEE; padding: 2px 0; } 
    span.hide { display: none; color: #aaa;}    a:hover span { display: inline; }    tr.change { background-color: gray; } 
    tr.change a { text-decoration: none; color: black } 
  </style> 
     <script>
var chunk_index = 0;
var old_chunk = null;

function format_chunk(index) {
    var prefix = "diff";
    var str = index.toString();
    for (x=0; x<(4-str.length); ++x) {
        prefix+='0';
    }
    return prefix + str;
}

function find_chunk(n){
    return document.querySelector('tr[id$="' + n + '"]');
}

function change_chunk(offset) {
    var index = chunk_index + offset;
    var new_str;
    var new_chunk;

    new_str = format_chunk(index);
    new_chunk = find_chunk(new_str);
    if (!new_chunk) {
        return;
    }
    if (old_chunk) {
        old_chunk.style.outline = "";
    }
    old_chunk = new_chunk;
    old_chunk.style.outline = "1px solid red";
    window.location.hash = "#" + new_str;
    window.scrollBy(0,-100);
    chunk_index = index;
}

document.onkeydown = function(e) {
    switch (e.keyCode) {
    case 78:
        change_chunk(1);
        break;
    case 80:
        change_chunk(-1);
        break;
    }
};
   </script> 
</head> 
<body > 
  <table border="0" cellpadding="0" cellspacing="0"> 
  <tr id="part-1" bgcolor="orange"><th></th><th><a href="/rfcdiff?url2=draft-srp-replication.txt" style="color:#008; text-decoration:none;">&lt;</a>&nbsp;<a href="https://tools.ietf.org/html/draft-srp-replication.txt" style="color:#008">draft-srp-replication.txt</a>&nbsp;</th><th> </th><th>&nbsp;<a href="https://tools.ietf.org/html/draft-lemon-srp-replication-01.txt" style="color:#008">draft-lemon-srp-replication-01.txt</a>&nbsp;<a href="/rfcdiff?url1=draft-lemon-srp-replication-01.txt" style="color:#008; text-decoration:none;">&gt;</a></th><th></th></tr> 
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Internet Engineering Task Force                                 T. Lemon</td><td> </td><td class="right">Internet Engineering Task Force                                 T. Lemon</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Internet-Draft                                                Apple Inc.</td><td> </td><td class="right">Internet-Draft                                                Apple Inc.</td><td class="lineno"></td></tr>
      <tr id="diff0001"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">Intended status: Standards Track                            <span class="delete">4 March 2022</span></td><td> </td><td class="rblock">Intended status: Standards Track                         <span class="insert">7 November 2021</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">Expires: <span class="delete">5 September</span> 2022</td><td> </td><td class="rblock">Expires: <span class="insert">11 May</span> 2022</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">  Automatic Replication of DNS-SD Service Registration Protocol Zones</td><td> </td><td class="right">  Automatic Replication of DNS-SD Service Registration Protocol Zones</td><td class="lineno"></td></tr>
      <tr id="diff0002"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                     draft-lemon-srp-replication-0<span class="delete">2</span></td><td> </td><td class="rblock">                     draft-lemon-srp-replication-0<span class="insert">1</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Abstract</td><td> </td><td class="right">Abstract</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This document describes a protocol that can be used for ad-hoc</td><td> </td><td class="right">   This document describes a protocol that can be used for ad-hoc</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   replication of a DNS zone by multiple servers where a single primary</td><td> </td><td class="right">   replication of a DNS zone by multiple servers where a single primary</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DNS authoritative server is not available and the use of stable</td><td> </td><td class="right">   DNS authoritative server is not available and the use of stable</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   storage is not desirable.</td><td> </td><td class="right">   storage is not desirable.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Status of This Memo</td><td> </td><td class="right">Status of This Memo</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-2" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-2"><em> page 1, line 33<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-2"><em> page 1, line 33<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   Internet-Drafts are working documents of the Internet Engineering</td><td> </td><td class="right">   Internet-Drafts are working documents of the Internet Engineering</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Task Force (IETF).  Note that other groups may also distribute</td><td> </td><td class="right">   Task Force (IETF).  Note that other groups may also distribute</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   working documents as Internet-Drafts.  The list of current Internet-</td><td> </td><td class="right">   working documents as Internet-Drafts.  The list of current Internet-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td> </td><td class="right">   Drafts is at https://datatracker.ietf.org/drafts/current/.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Internet-Drafts are draft documents valid for a maximum of six months</td><td> </td><td class="right">   Internet-Drafts are draft documents valid for a maximum of six months</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and may be updated, replaced, or obsoleted by other documents at any</td><td> </td><td class="right">   and may be updated, replaced, or obsoleted by other documents at any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   time.  It is inappropriate to use Internet-Drafts as reference</td><td> </td><td class="right">   time.  It is inappropriate to use Internet-Drafts as reference</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   material or to cite them other than as "work in progress."</td><td> </td><td class="right">   material or to cite them other than as "work in progress."</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0003"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   This Internet-Draft will expire on <span class="delete">5 September</span> 2022.</td><td> </td><td class="rblock">   This Internet-Draft will expire on <span class="insert">11 May</span> 2022.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Copyright Notice</td><td> </td><td class="right">Copyright Notice</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0004"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Copyright (c) 202<span class="delete">2</span> IETF Trust and the persons identified as the</td><td> </td><td class="rblock">   Copyright (c) 202<span class="insert">1</span> IETF Trust and the persons identified as the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   document authors.  All rights reserved.</td><td> </td><td class="right">   document authors.  All rights reserved.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td> </td><td class="right">   This document is subject to BCP 78 and the IETF Trust's Legal</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Provisions Relating to IETF Documents (https://trustee.ietf.org/</td><td> </td><td class="right">   Provisions Relating to IETF Documents (https://trustee.ietf.org/</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   license-info) in effect on the date of publication of this document.</td><td> </td><td class="right">   license-info) in effect on the date of publication of this document.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Please review these documents carefully, as they describe your rights</td><td> </td><td class="right">   Please review these documents carefully, as they describe your rights</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   and restrictions with respect to this document.  Code Components</td><td> </td><td class="right">   and restrictions with respect to this document.  Code Components</td><td class="lineno"></td></tr>
      <tr id="diff0005"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   extracted from this document must include <span class="delete">Revised</span> BSD License text as</td><td> </td><td class="rblock">   extracted from this document must include <span class="insert">Simplified</span> BSD License text</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   described in Section 4.e of the Trust Legal Provisions and are</td><td> </td><td class="rblock">   as described in Section 4.e of the Trust Legal Provisions and are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   provided without warranty as described in the <span class="delete">Revised</span> BSD License.</td><td> </td><td class="rblock">   provided without warranty as described in the <span class="insert">Simplified</span> BSD License.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Table of Contents</td><td> </td><td class="right">Table of Contents</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3</td><td> </td><td class="right">   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     1.1.  Alternatives for maintaining SRP state  . . . . . . . . .   3</td><td> </td><td class="right">     1.1.  Alternatives for maintaining SRP state  . . . . . . . . .   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       1.1.1.  Primary authoritative DNS service . . . . . . . . . .   3</td><td> </td><td class="right">       1.1.1.  Primary authoritative DNS service . . . . . . . . . .   3</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       1.1.2.  Multicast DNS Advertising Proxy . . . . . . . . . . .   4</td><td> </td><td class="right">       1.1.2.  Multicast DNS Advertising Proxy . . . . . . . . . . .   4</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       1.1.3.  SRP Replication . . . . . . . . . . . . . . . . . . .   4</td><td> </td><td class="right">       1.1.3.  SRP Replication . . . . . . . . . . . . . . . . . . .   4</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   2.  Implementation  . . . . . . . . . . . . . . . . . . . . . . .   5</td><td> </td><td class="right">   2.  Implementation  . . . . . . . . . . . . . . . . . . . . . . .   5</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     2.1.  Naming of a common service zone . . . . . . . . . . . . .   5</td><td> </td><td class="right">     2.1.  Naming of a common service zone . . . . . . . . . . . . .   5</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       2.1.1.  Zone name based on network name . . . . . . . . . . .   5</td><td> </td><td class="right">       2.1.1.  Zone name based on network name . . . . . . . . . . .   5</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       2.1.2.  Zone name based on local configuration  . . . . . . .   6</td><td> </td><td class="right">       2.1.2.  Zone name based on local configuration  . . . . . . .   6</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">       2.1.3.  Zone name based on DNS-SD discovery . . . . . . . . .   6</td><td> </td><td class="right">       2.1.3.  Zone name based on DNS-SD discovery . . . . . . . . .   6</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     2.2.  Advertising one's own replication service . . . . . . . .   7</td><td> </td><td class="right">     2.2.  Advertising one's own replication service . . . . . . . .   7</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     2.3.  Discovering other replication services  . . . . . . . . .   8</td><td> </td><td class="right">     2.3.  Discovering other replication services  . . . . . . . . .   8</td><td class="lineno"></td></tr>
      <tr id="diff0006"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     <span class="delete">2.4.  Partner discovery phase . . . . . . . . . . . .</span> . . . . .   <span class="delete">8</span></td><td> </td><td class="rblock">       <span class="insert">2.3.1.  Getting an SRP zone name from other SRP services</span>  . .   <span class="insert">8</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     2.5.  Partner ID</span>  . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">9</span></td><td> </td><td class="rblock"><span class="insert">       2.3.2.  Establishing Replication with an existing Dataset</span> . .   <span class="insert">9</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     2.6.  Dataset ID</span>  . . . . . . . . . . . . . . . . . . . . . . .   <span class="delete">9</span></td><td> </td><td class="rblock"><span class="insert">       2.3.3.  Establishing Replication When There Is No Existing</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     2.7.</span>  Discovering the addresses of partners . . . . . . . . . .  <span class="delete">10</span></td><td> </td><td class="rblock"><span class="insert">               Dataset</span> . . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">11</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     2.8.</span>  Establishing Communication with a replication partner . .  <span class="delete">10</span></td><td> </td><td class="rblock"><span class="insert">       2.3.4.  Conflicting precedence values</span> . . . . . . . . . . . .  <span class="insert">11</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     2.9.</span>  Incoming connections  . . . . . . . . . . . . . . . . . .  <span class="delete">11</span></td><td> </td><td class="rblock"><span class="insert">       2.3.5.  Handling primary transitions</span>  . . . . . . . . . . . .  <span class="insert">11</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     2.10.</span> Initial synchronization . . . . . . . . . . . . . . . . .  <span class="delete">11</span></td><td> </td><td class="rblock"><span class="insert">     2.4.</span>  Discovering the addresses of partners . . . . . . . . . .  <span class="insert">12</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">       2.10.1.</span>  Sending candidates . . . . . . . . . . . . . . . . .  <span class="delete">12</span></td><td> </td><td class="rblock"><span class="insert">     2.5.</span>  Establishing Communication with a replication partner . .  <span class="insert">12</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">     2.11.</span> Routine Operation . . . . . . . . . . . . . . . . . . . .  <span class="delete">13</span></td><td> </td><td class="rblock"><span class="insert">     2.6.</span>  Incoming connections  . . . . . . . . . . . . . . . . . .  <span class="insert">13</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   3.  Protocol Details  . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">13</span></td><td> </td><td class="rblock"><span class="insert">     2.7.  Eliminating extra connections . . . . . . . . . . . . . .  13</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     3.1.  DNS Stateful Operations considerations  . . . . . . . . .  <span class="delete">13</span></td><td> </td><td class="rblock"><span class="insert">     2.8.</span>  Initial synchronization . . . . . . . . . . . . . . . . .  <span class="insert">13</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.1.1.  DSO Session Establishment . . . . . . . . . . . . . .  <span class="delete">13</span></td><td> </td><td class="rblock"><span class="insert">       2.8.1.</span>  Sending candidates  . . . . . . . . . . . . . . . . .  <span class="insert">14</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.1.2.  DSO Session maintenance . . . . . . . . . . . . . . .  <span class="delete">14</span></td><td> </td><td class="rblock"><span class="insert">     2.9.</span>  Routine Operation . . . . . . . . . . . . . . . . . . . .  <span class="insert">15</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     3.2.  <span class="delete">SRPL Messages . .</span> . . . . . . . . . . . . . . . . . . . .  <span class="delete">14</span></td><td> </td><td class="rblock">   3.  Protocol Details  . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">15</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.2.1.  SRPL Session  . . . . . . . . . . . . . . . . . . . .  <span class="delete">14</span></td><td> </td><td class="rblock">     3.1.  DNS Stateful Operations considerations  . . . . . . . . .  <span class="insert">15</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.2.2.  SRPL Send Candidates  . . . . . . . . . . . . . . . .  <span class="delete">15</span></td><td> </td><td class="rblock">       3.1.1.  DSO Session Establishment . . . . . . . . . . . . . .  <span class="insert">15</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.2.3.  SRPL Candidate  . . . . . . . . . . . . . . . . . . .  <span class="delete">16</span></td><td> </td><td class="rblock">       3.1.2.  DSO Session maintenance . . . . . . . . . . . . . . .  <span class="insert">16</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.2.4.  SRPL Host . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">17</span></td><td> </td><td class="rblock">     3.2.  <span class="insert">DSO Primary TLVs</span>  . . . . . . . . . . . . . . . . . . . .  <span class="insert">16</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     3.3.  DSO Secondary TLVs  . . . . . . . . . . . . . . . . . . .  <span class="delete">18</span></td><td> </td><td class="rblock">       3.2.1.  SRPL Session  . . . . . . . . . . . . . . . . . . . .  <span class="insert">16</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.3.1.  SRPL Candidate Yes  . . . . . . . . . . . . . . . . .  <span class="delete">19</span></td><td> </td><td class="rblock">       3.2.2.  SRPL Send Candidates  . . . . . . . . . . . . . . . .  <span class="insert">17</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.3.2.  SRPL Candidate No . . . . . . . . . . . . . . . . . .  <span class="delete">19</span></td><td> </td><td class="rblock">       3.2.3.  SRPL Candidate  . . . . . . . . . . . . . . . . . . .  <span class="insert">18</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.3.3.  SRPL Conflict . . . . . . . . . . . . . . . . . . . .  <span class="delete">19</span></td><td> </td><td class="rblock">       3.2.4.  SRPL Host . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">19</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.3.4.  SRPL Hostname . . . . . . . . . . . . . . . . . . . .  <span class="delete">19</span></td><td> </td><td class="rblock">     3.3.  DSO Secondary TLVs  . . . . . . . . . . . . . . . . . . .  <span class="insert">20</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.3.5.  SRPL Host Message . . . . . . . . . . . . . . . . . .  <span class="delete">20</span></td><td> </td><td class="rblock">       3.3.1.  SRPL Candidate Yes  . . . . . . . . . . . . . . . . .  <span class="insert">20</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.3.6.  SRPL Time Offset  . . . . . . . . . . . . . . . . . .  <span class="delete">20</span></td><td> </td><td class="rblock">       3.3.2.  SRPL Candidate No . . . . . . . . . . . . . . . . . .  <span class="insert">21</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">       3.3.7.  SRPL Key ID . . . . . . . . . . . . . . . . . . . . .  <span class="delete">20</span></td><td> </td><td class="rblock">       3.3.3.  SRPL Conflict . . . . . . . . . . . . . . . . . . . .  <span class="insert">21</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">       3.3.8.  SRPL New Partner  . . . . . . . . . . . . . . . . . .  21</span></td><td> </td><td class="rblock">       3.3.4.  SRPL Hostname . . . . . . . . . . . . . . . . . . . .  <span class="insert">21</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   4.  Security Considerations . . . . . . . . . . . . . . . . . . .  <span class="delete">21</span></td><td> </td><td class="rblock">       3.3.5.  SRPL Host Message . . . . . . . . . . . . . . . . . .  <span class="insert">21</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   5.  Delegation of 'local.arpa.' . . . . . . . . . . . . . . . . .  <span class="delete">21</span></td><td> </td><td class="rblock">       3.3.6.  SRPL Time Offset  . . . . . . . . . . . . . . . . . .  <span class="insert">22</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <span class="delete">21</span></td><td> </td><td class="rblock">       3.3.7.  SRPL Key ID . . . . . . . . . . . . . . . . . . . . .  <span class="insert">22</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     6.1.  'srpl-tls' Service Name . . . . . . . . . . . . . . . . .  <span class="delete">21</span></td><td> </td><td class="rblock">   4.  Security Considerations . . . . . . . . . . . . . . . . . . .  <span class="insert">22</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">     6.2.  DSO TLV type code . . . . . . . . . . . . . . . . . . . .  <span class="delete">22</span></td><td> </td><td class="rblock">   5.  Delegation of 'local.arpa.' . . . . . . . . . . . . . . . . .  <span class="insert">23</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  <span class="insert">23</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">     6.1.  'srpl-tls' Service Name . . . . . . . . . . . . . . . . .  <span class="insert">23</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">     6.2.  DSO TLV type code . . . . . . . . . . . . . . . . . . . .  <span class="insert">23</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">     6.3.  Registration and Delegation of 'local.arpa' as a</td><td> </td><td class="right">     6.3.  Registration and Delegation of 'local.arpa' as a</td><td class="lineno"></td></tr>
      <tr id="diff0007"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">           Special-Use Domain Name . . . . . . . . . . . . . . . . .  <span class="delete">23</span></td><td> </td><td class="rblock">           Special-Use Domain Name . . . . . . . . . . . . . . . . .  <span class="insert">24</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock">   7.  Informative References  . . . . . . . . . . . . . . . . . . .  <span class="insert">25</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   7.  Informative References  . . . . . . . . . . . . . . . . . . .  <span class="delete">23</span></td><td> </td><td class="rblock">   8.  Normative References  . . . . . . . . . . . . . . . . . . . .  <span class="insert">25</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   8.  Normative References  . . . . . . . . . . . . . . . . . . . .  <span class="delete">23</span></td><td> </td><td class="rblock">   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .  <span class="insert">25</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .  <span class="delete">24</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">1.  Introduction</td><td> </td><td class="right">1.  Introduction</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The DNS-SD Service Registration Protocol provides a way for network</td><td> </td><td class="right">   The DNS-SD Service Registration Protocol provides a way for network</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   services to update a DNS zone with DNS-SD information.  SRP uses</td><td> </td><td class="right">   services to update a DNS zone with DNS-SD information.  SRP uses</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   unicast DNS Updates, rather than multicast DNS, to advertise</td><td> </td><td class="right">   unicast DNS Updates, rather than multicast DNS, to advertise</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   services.  This has several advantages over multicast DNS:</td><td> </td><td class="right">   services.  This has several advantages over multicast DNS:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  Reduces reliance on multicast</td><td> </td><td class="right">   *  Reduces reliance on multicast</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-3" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-3"><em> page 7, line 8<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-3"><em> page 7, line 12<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   based on DNS-SD discovery, the SRP replication partner should add two</td><td> </td><td class="right">   based on DNS-SD discovery, the SRP replication partner should add two</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   fields to the TXT record of the service instance.  The first field is</td><td> </td><td class="right">   fields to the TXT record of the service instance.  The first field is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the domain field: 'domain=name'.  This indicates a proposed SRP</td><td> </td><td class="right">   the domain field: 'domain=name'.  This indicates a proposed SRP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   replication zone name.  The second is the join field.  If 'join=yes'</td><td> </td><td class="right">   replication zone name.  The second is the join field.  If 'join=yes'</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   then other SRP replication servers are encouraged to use the domain</td><td> </td><td class="right">   then other SRP replication servers are encouraged to use the domain</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   name that appears in the domain field rather than creating a new</td><td> </td><td class="right">   name that appears in the domain field rather than creating a new</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   domain.</td><td> </td><td class="right">   domain.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">2.2.  Advertising one's own replication service</td><td> </td><td class="right">2.2.  Advertising one's own replication service</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0008"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   An SRP replication service advertises its replication service <span class="delete">after</span></td><td> </td><td class="rblock">   An SRP replication service <span class="insert">only</span> advertises its replication service <span class="insert">if</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   it is <span class="delete">finishes</span> the <span class="delete">partner discovery phase as specified in</span></td><td> </td><td class="rblock"><span class="insert">   no other service for the domain</span> it is <span class="insert">replicating is already present,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Section 2.4.</span></td><td> </td><td class="rblock"><span class="insert">   or else if it has successfully connected to and synchronized with all</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   of</span> the <span class="insert">SRP services it sees advertised for the domain it is</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   configured to replicate.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRP replication service is advertised using DNS-SD [RFC6763].  The</td><td> </td><td class="right">   SRP replication service is advertised using DNS-SD [RFC6763].  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   service name is '_srpl-tls._tcp'.  Each SRP replication partner</td><td> </td><td class="right">   service name is '_srpl-tls._tcp'.  Each SRP replication partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   should have its own hostname, which when combined with the service</td><td> </td><td class="right">   should have its own hostname, which when combined with the service</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   instance name and the local DNS-SD domain name will produce a service</td><td> </td><td class="right">   instance name and the local DNS-SD domain name will produce a service</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   instance name, for example 'example-host._srpl-tls._tcp.local.'  The</td><td> </td><td class="right">   instance name, for example 'example-host._srpl-tls._tcp.local.'  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   domain under which the service instance name appears will be 'local'</td><td> </td><td class="right">   domain under which the service instance name appears will be 'local'</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for mDNS, and will be whatever domain is used for service</td><td> </td><td class="right">   for mDNS, and will be whatever domain is used for service</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   registration in the case of a non-mDNS local DNS-SD service.</td><td> </td><td class="right">   registration in the case of a non-mDNS local DNS-SD service.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRP replication uses DNS port 853 [RFC7858] and is based on DNS</td><td> </td><td class="right">   SRP replication uses DNS port 853 [RFC7858] and is based on DNS</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stateful Operations [RFC8490].  Therefore, the SRV record for the</td><td> </td><td class="right">   Stateful Operations [RFC8490].  Therefore, the SRV record for the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   example we've given would be:</td><td> </td><td class="right">   example we've given would be:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   example-host._srpl-tls._tcp.local.  IN SRV 0 0 853 example-</td><td> </td><td class="right">   example-host._srpl-tls._tcp.local.  IN SRV 0 0 853 example-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   host.local.</td><td> </td><td class="right">   host.local.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The TXT record for SRP replication advertises the following fields:</td><td> </td><td class="right">   The TXT record for SRP replication advertises the following fields:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0009"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">did</span>  dataset <span class="delete">ID as</span> a 64-bit number encoded as hexadecimal <span class="delete">ASCII.</span>  The</td><td> </td><td class="rblock">   dataset  a 64-bit number encoded as hexadecimal <span class="insert">ASCII, produced with</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      dataset ID is used by SRP servers to establish a common SRP</td><td> </td><td class="rblock"><span class="insert">      a high-quality random number generator [RFC4086].</span>  The dataset ID</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">      dataset for a <span class="delete">domain as described in Section 2.6.</span></td><td> </td><td class="rblock">      is used by SRP servers to establish a common SRP dataset for a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">      <span class="insert">domain.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   join  'yes' or 'no'.  Indicates whether other SRP replication servers</td><td> </td><td class="right">   join  'yes' or 'no'.  Indicates whether other SRP replication servers</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      are invited to join in replicating the dataset.</td><td> </td><td class="right">      are invited to join in replicating the dataset.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0010"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">pid  partner ID as</span> a <span class="delete">64-bit</span> number <span class="delete">encoded as hexadecimal ASCII as</span></td><td> </td><td class="rblock">   <span class="insert">prec</span>  a <span class="insert">32-bit</span> number <span class="insert">representing the precedence of the server</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">      described</span> in <span class="delete">Section 2.5.</span></td><td> </td><td class="rblock"><span class="insert">      advertising the TXT record, represented</span> in <span class="insert">decimal</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0011"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   dn  the domain name that this dataset is intended to represent</td><td> </td><td class="rblock">   d<span class="insert">omai</span>n  the domain name that this dataset is intended to represent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0012"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   So in our example the TXT record might look like this:</td><td> </td><td class="rblock">   <span class="insert">This identifier need not be persistent across SRP replication partner</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   restarts.</span>  So in our example the TXT record might look like this:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0013"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">\031dn=openthread.thread.home.arpa.\020did=eb5bb51919a15cec\020pid=2c</span></td><td> </td><td class="rblock">   <span class="insert">#domain=openthread.thread.home.arpa.\025dataset=eb5bb51919a15cec\006p</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   de2bed200126af\008join=yes</span></td><td> </td><td class="rblock"><span class="insert">   rec=1\008join=yes</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   (Note that each name/value pair in the TXT record is length-encoded,</td><td> </td><td class="right">   (Note that each name/value pair in the TXT record is length-encoded,</td><td class="lineno"></td></tr>
      <tr id="diff0014"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   so the <span class="delete">'\031`,</span> the <span class="delete">two '\020',</span> and the '\008' are the lengths of the</td><td> </td><td class="rblock">   so the <span class="insert">'#',</span> the <span class="insert">'\025', the '\006'</span> and the '\008' are the lengths of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   name/value pairs.)</td><td> </td><td class="rblock">   the <span class="insert">four</span> name/value pairs.)</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">2.3.  Discovering other replication services</td><td> </td><td class="right">2.3.  Discovering other replication services</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRP Replication is a cooperative process.  In order to ensure</td><td> </td><td class="right">   SRP Replication is a cooperative process.  In order to ensure</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   cooperation between SRP replication partners on a link, it is</td><td> </td><td class="right">   cooperation between SRP replication partners on a link, it is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   necessary that each replication partner be aware of other potential</td><td> </td><td class="right">   necessary that each replication partner be aware of other potential</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   partners.  This is accomplished by maintaining a continuous browse</td><td> </td><td class="right">   partners.  This is accomplished by maintaining a continuous browse</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   for services of the service type "_srpl-tls._tcp".</td><td> </td><td class="right">   for services of the service type "_srpl-tls._tcp".</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An SRP Replication Partner MUST maintain an ongoing DNS-SD browse on</td><td> </td><td class="right">   An SRP Replication Partner MUST maintain an ongoing DNS-SD browse on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-4" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-4"><em> page 8, line 28<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-4"><em> page 8, line 35<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   present on the network, including the partner that is doing the</td><td> </td><td class="right">   present on the network, including the partner that is doing the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   browsing.  Whenever a partner goes offline, a 'remove' event should</td><td> </td><td class="right">   browsing.  Whenever a partner goes offline, a 'remove' event should</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   be produced. 'remove' events are not guaranteed, however.</td><td> </td><td class="right">   be produced. 'remove' events are not guaranteed, however.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a new service is added, the SRP partner checks to see if it is</td><td> </td><td class="right">   When a new service is added, the SRP partner checks to see if it is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   in a compatible domain.  If the SRP partner has a domain to</td><td> </td><td class="right">   in a compatible domain.  If the SRP partner has a domain to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   advertise, it compares that domain to the domain advertised in the</td><td> </td><td class="right">   advertise, it compares that domain to the domain advertised in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   added service instance: if they are not the same, then this instance</td><td> </td><td class="right">   added service instance: if they are not the same, then this instance</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   is not a candidate for connection, and should be ignored.</td><td> </td><td class="right">   is not a candidate for connection, and should be ignored.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0015"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">2.4.  Partner discovery phase</span></td><td> </td><td class="rblock"><span class="insert">2.3.1.  Getting an</span> SRP <span class="insert">zone name</span> from <span class="insert">other SRP services</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   When a partner starts</span> SRP <span class="delete">Replication, it enters discovery phase.  It</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   picks a random discovery time interval uniformly selected</span> from <span class="delete">range</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   MIN_PARNTER_DISCOVERY_INTERVAL up to MAX_PARTNER_DISCOVERY_INTERVAL.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   The recommended minimum and maximum value is 4 and 7.5 seconds.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0016"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The partner spends</span> the <span class="delete">selected interval to discover partners to sync</span></td><td> </td><td class="rblock">   <span class="insert">If</span> the <span class="insert">SRP partner</span> does not have <span class="insert">a domain to advertise, then when</span> it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   and domain name if it</span> does not have <span class="delete">one.  It can itself start</span></td><td> </td><td class="rblock">   <span class="insert">begins</span> to <span class="insert">browse</span> for <span class="insert">partners,</span> it <span class="insert">sets a timer for</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   advertising replication service and start acting as an SRP server</span></td><td> </td><td class="rblock"><span class="insert">   DOMAIN_DISCOVERY_TIMEOUT seconds.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   only after this discover time is passed and</span> it <span class="delete">either successfully</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   synchronized or attempted</span> to <span class="delete">synchronize and failed</span> for <span class="delete">at least</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   NUM_DISCOVERY_SYNC_ATTAMPETS times with each partner</span> it <span class="delete">discovered</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   during the discovery interval.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0017"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If <span class="delete">no other partner is discovered by end of the interval,</span> the SRP</td><td> </td><td class="rblock">   If the SRP partner <span class="insert">does not have a domain to advertise, and</span> is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   partner <span class="delete">determines that it</span> is the <span class="delete">only or the first partner.  It then</span></td><td> </td><td class="rblock">   <span class="insert">therefore willing to join an existing domain, it checks to see if the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   generates the Dataset ID using the process described in Section 2.6.</span></td><td> </td><td class="rblock"><span class="insert">   TXT record for</span> the <span class="insert">service indicates that joining is permitted.</span>  If</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If the SRP partner <span class="delete">does not have a</span> domain <span class="delete">name then</span> it <span class="delete">MUST also</span></td><td> </td><td class="rblock">   <span class="insert">so,</span> the SRP partner <span class="insert">adopts the provided</span> domain <span class="insert">name.  Once</span> it <span class="insert">has</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   select</span> a <span class="delete">zone name using one of the methods mentioned previously</span> in</td><td> </td><td class="rblock"><span class="insert">   adopted such</span> a <span class="insert">domain name, it updates its own TXT record to indicate</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">Section 2.1.</span>  It <span class="delete">can then start advertising</span> the <span class="delete">replication service</span></td><td> </td><td class="rblock"><span class="insert">   that domain name, and sets the 'join=yes' key/value pair</span> in <span class="insert">the TXT</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   as mentioned in Section 2.2.</span></td><td> </td><td class="rblock"><span class="insert">   record.</span>  It <span class="insert">also cancels</span> the <span class="insert">DOMAIN_DISCOVERY_TIMEOUT timer.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0018"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If the SRP partner <span class="delete">does not have a domain to advertise and is</span></td><td> </td><td class="rblock">   If the <span class="insert">DOMAIN_DISCOVERY_TIMEOUT timer goes off, then the</span> SRP partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   therefore willing to join an existing domain, when it discovers</span> a</td><td> </td><td class="rblock">   <span class="insert">MUST propose</span> a <span class="insert">zone name using one of</span> the <span class="insert">methods mentioned</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">partner it checks to see if</span> the TXT <span class="delete">record</span> for <span class="delete">the service indicates</span></td><td> </td><td class="rblock"><span class="insert">   previously in Section 2.1.  It advertises that zone name in its</span> TXT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   that joining is permitted.  If so, the SRP partner adopts the</span></td><td> </td><td class="rblock">   <span class="insert">record, with 'join=yes'.  It then sets a new timer</span> for</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   provided domain name.</span></td><td> </td><td class="rblock">   <span class="insert">DOMAIN_PROPOSE_TIMEOUT seconds.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0019"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">2.5.  Partner ID</span></td><td> </td><td class="rblock">   <span class="insert">While waiting for the DOMAIN_PROPOSE_TIMEOUT timer to go off, any new</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   'add' events that arrive are examined to see if they are potential</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   domains to join.  If a potential domain to join is seen, and it is</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the same as the proposed domain, then the partner adopts that domain</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   and treats it as its domain to advertise.  It then cancels the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   DOMAIN_DISCOVERY_TIMEOUT timer.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0020"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The partner ID is a 64-bit number associated with an SRP replication</span></td><td> </td><td class="rblock">   <span class="insert">At this point the</span> SRP replication partner <span class="insert">has</span> a <span class="insert">domain</span> to <span class="insert">advertise:</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   partner.  Upon staring</span> SRP replication <span class="delete">operation, the</span> partner</td><td> </td><td class="rblock"><span class="insert">   either the one</span> it <span class="insert">produced, or one that it discovered.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">generates</span> a <span class="delete">random ID using a high-quality random number generator</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   [RFC4086].  The partner ID does not need</span> to <span class="delete">be persisted over SRP</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   replication restarts.  If partner restarts SRP replication operation</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   it <span class="delete">MUST select a new random ID.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0021"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">With ID being randomly generated 64-bit number, the likelihood of ID</span></td><td> </td><td class="rblock"><span class="insert">2.3.2.  Establishing Replication with</span> an <span class="insert">existing Dataset</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   conflict is small.  However, if</span> an <span class="delete">SRP partner discovers another</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   partner using the same ID, the partner restarts SRP replication</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   operation which trigger it to pick a new random ID.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0022"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">2.6.  Dataset ID</span></td><td> </td><td class="rblock">   <span class="insert">Once an SRP replication partner has settled on a domain to advertise,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   it must either join other SRP replication partners in replicating</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   that domain, or if it is the first, it must advertise its willingness</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to participate in replicating the domain.  In order to do this, it</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   must settle on a dataset ID.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0023"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The dataset ID is a 64-bit number, generated by the first <span class="delete">partner</span> to</td><td> </td><td class="rblock">   The dataset ID is a <span class="insert">random</span> 64-bit number, generated by the first</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   offer that dataset.  There should always be exactly one dataset ID</td><td> </td><td class="rblock">   <span class="insert">server</span> to offer that dataset.  There should always be exactly one</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   per domain, but the dataset ID has a separate purpose: it represents</td><td> </td><td class="rblock">   dataset ID per domain, but the dataset ID has a separate purpose: it</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the set of data that is being replicated by a set of cooperating SRP</td><td> </td><td class="rblock">   represents the set of data that is being replicated by a set of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   replication partners.  This data is then offered under the <span class="delete">agreed-</span></td><td> </td><td class="rblock">   cooperating SRP replication partners.  This data is then offered</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   upon</span> domain, but it's possible that there might be several sets of</td><td> </td><td class="rblock">   under the <span class="insert">agreed-upon</span> domain, but it's possible that there might be</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   SRP replication partners that agree to replicate a particular domain,</td><td> </td><td class="rblock">   several sets of SRP replication partners that agree to replicate a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   and then some event occurs which renders these partners visible to</td><td> </td><td class="rblock">   particular domain, and then some event occurs which renders these</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   each other.  When this happens, the independent sets of partners must</td><td> </td><td class="rblock">   partners visible to each other.  When this happens, the independent</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   converge on a single dataset.  This is done using the dataset ID.</td><td> </td><td class="rblock">   sets of partners must converge on a single dataset.  This is done</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   using the dataset ID.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When more than one dataset ID is present for a particular domain, the</td><td> </td><td class="right">   When more than one dataset ID is present for a particular domain, the</td><td class="lineno"></td></tr>
      <tr id="diff0024"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">mechanism below is used to select an</span> ID <span class="delete">as the preferred ID.  The</span> SRP</td><td> </td><td class="rblock">   <span class="insert">dataset</span> ID <span class="insert">that is numerically lowest is preferred.  This means that</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   replication partners that are currently replicating a dataset with a</td><td> </td><td class="rblock">   SRP replication partners that are currently replicating a dataset</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">non-preferred</span> dataset ID will have to abandon that dataset and join</td><td> </td><td class="rblock">   with a <span class="insert">numerically higher</span> dataset ID will have to abandon that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   together in replicating the preferred dataset.</td><td> </td><td class="rblock">   dataset and join together <span class="insert">in replicating the numerically lowest</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   dataset.  Servers that are not replicating the numerically lowest</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   dataset will therefore stop advertising SRP replication service and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   begin attempting to join in</span> in replicating the preferred dataset.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0025"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">If there</span> are <span class="delete">two</span> dataset <span class="delete">IDs, the one that is numerically larger in</span></td><td> </td><td class="rblock">   <span class="insert">When a set of servers</span> are <span class="insert">advertising a particular</span> dataset <span class="insert">ID,</span> the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the sense as defined in serial number arithmetic [RFC1982] is</span></td><td> </td><td class="rblock">   <span class="insert">server</span> with the <span class="insert">lowest precedence</span> is <span class="insert">primary.  The primary server is</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   preferred.  If there are multiple IDs, again the ID that is</span></td><td> </td><td class="rblock"><span class="insert">   responsible for handing out precedence values</span> to <span class="insert">new partners as they</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   numerically largest is preferred.  However, using</span> the <span class="delete">serial number</span></td><td> </td><td class="rblock"><span class="insert">   join</span> in <span class="insert">replicating</span> the <span class="insert">dataset.  Precedence IDs are always allocated</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   comparison</span> with <span class="delete">three or more IDs, it is possible though unlikely</span></td><td> </td><td class="rblock"><span class="insert">   starting with the precedence</span> that is <span class="insert">one greater than</span> the <span class="insert">primary's</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   that</span> the <span class="delete">largest value may not be well-defined.  For example, it</span> is</td><td> </td><td class="rblock"><span class="insert">   precedence.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">possible</span> to <span class="delete">have three IDs each being larger (in serial number sense)</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   than another one.  In such a situation where the largest</span> in <span class="delete">serial</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   number sense is not well-defined,</span> the <span class="delete">ID</span> that is <span class="delete">largest in</span> the</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">normal numerical comparison sense is preferred.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0026"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">If</span> an SRP partner <span class="delete">determines</span> that it <span class="delete">is the first partner to offer</span></td><td> </td><td class="rblock">   <span class="insert">When</span> an SRP <span class="insert">replication</span> partner <span class="insert">has stopped advertising a particular</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the dataset,</span> it <span class="delete">generates</span> the <span class="delete">dataset ID.</span>  SRP <span class="delete">partners MUST persist</span></td><td> </td><td class="rblock"><span class="insert">   dataset ID, or has just started and therefore hasn't started</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the last used dataset ID or</span> the <span class="delete">highest (most significant byte or</span></td><td> </td><td class="rblock"><span class="insert">   advertising a particular dataset ID, and there is a dataset ID</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   MSB) of</span> the <span class="delete">ID associated with same domain in non-volatile memory.</span></td><td> </td><td class="rblock"><span class="insert">   present</span> that it <span class="insert">can join in replicating,</span> it <span class="insert">attempts to connect to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   When generated</span> a new <span class="delete">dataset ID, partner increment the MSB of last</span></td><td> </td><td class="rblock">   the SRP <span class="insert">replication partner that is primary for</span> the <span class="insert">dataset.  If</span> the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   used ID</span> to <span class="delete">use</span> as <span class="delete">MSB</span> of <span class="delete">new ID and populates the lower 56-bit</span></td><td> </td><td class="rblock">   <span class="insert">startup handshake succeeds, the primary will assign</span> a new <span class="insert">precedence</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   randomly using a high-quality random number generator [RFC4086].  If</span></td><td> </td><td class="rblock">   to <span class="insert">the connecting partner</span> as <span class="insert">part</span> of the <span class="insert">handshake.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   there is no previously saved ID, then</span> the <span class="delete">entire 64-bit ID is</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   generated randomly.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0027"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">2.7.</span>  Discovering the addresses of partners</td><td> </td><td class="rblock">   <span class="insert">Once the synchronization phase has finished, the connecting partner</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   will begin advertising the SRP service for the chosen domain using</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the new dataset ID and the precedence it received from the primary.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The connecting server will then also attempt to connect to every SRP</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   partner it sees advertising the same dataset ID and a lower</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   precedence.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   It is possible that an SRP partner will attempt to join in</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   replicating a dataset, but the primary for that dataset may have</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   discontinued service, but the advertisement for the primary is still</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   in the cache.  In this case, the SRP partner will attempt to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   reconfirm the primary's advertisement.  In mDNS, this is done as</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   described in Section 10.4 of [RFC6762].  For DNS Push connections,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   this is done using the RECONFIRM messsage, described in Section 6.5</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   of [RFC8765].  For regular (polled) DNS, the SRP partner must trigger</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   a new DNS query.  If the primary advertisement is successfully</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   confirmed, this indicates that there is a problem connecting to the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   primary, in which case the connecting partner SHOULD discontinue</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   attempting to connect for at least MIN_RECONNECT_AFTER_FAILURE</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   seconds.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Otherwise, the connecting partner will attempt to connect to the new</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   primary if there is one.  If there are no other servers advertising</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the dataset ID, then the connecting partner reverts to attempting to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   start its own replication of that dataset.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">2.3.3.  Establishing Replication When There Is No Existing Dataset</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   When an SRP replication partner has attempted to discover partners</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   with which to connect, and failed to do so, it then creates its own</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   dataset ID and precedence and begins advertising that dataset.  Both</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the dataset ID and precedence should be generated using a non-</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   deterministic random number generator.  The dataset ID should be a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   random number greater than or equal to zero and less than 2^64.  The</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   precedence should be a random number greater than or equal to 0 and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   less than 2^15.  The reason for the upper limit is to allow for a</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   large range of numbers toward which the predence can increase.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The replication partner begins advertising this new dataset as soon</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   as the dataset ID and precedence have been generated.  As in the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   previous section, if a new dataset ID is seen shortly afterwards,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   this most likely indicates that two SRP replication instances came up</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   at the same time; in this case as with the previous one, the lower</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   dataset ID is preferred, and the partner advertising the higher</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   dataset ID abandons that dataset ID to join the partner with the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   lower dataset ID.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The replication partner that first advertises the dataset is the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   primary replication partner for that dataset.  It is responsible for</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   assigning precedences to new partners.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">2.3.4.  Conflicting precedence values</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   It is possible that two SRP replication partners that see different</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   service advertisements could identify different SRP replication</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   servers as primary and attempt to get their precedence values from</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   those different servers.  When this happens, it's possible that they</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   might both get the same precedence value.  When this occurs, as soon</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   each partner sees another partner advertising its precedence in an</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   SRP replication advertisement, it must discontinue advertising and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   restart the dataset discovery process.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">2.3.5.  Handling primary transitions</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   An SRP partner either identifies itself as primary or not.  When an</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   SRP partner is primary, it never connects to other SRP servers--it</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   only receives connections.  When a non-primary partner connects to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the primary partner, it knows it is connecting to the primary</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   partner.  If the connection with the primary drops, or if the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   primary's advertisement goes away, then the non-primary evaluates the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   set of advertisements that it sees.  If its precedence is lowest, it</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   identifies itself as primary.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Non-primary servers receive updates from the primary whenever the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   maximum precedence value changes.  Non-primary servers should track</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   this precedence value.  When a non-primary becomes primary, it should</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   add ten to the most recently received precedence value, so as to skip</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   any possible precedence assignments that haven't yet propagated.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">2.4.</span>  Discovering the addresses of partners</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a partner is discovered, two new ongoing mDNS queries are</td><td> </td><td class="right">   When a partner is discovered, two new ongoing mDNS queries are</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   started on the hostname indicated in the SRV record of the partner:</td><td> </td><td class="right">   started on the hostname indicated in the SRV record of the partner:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   one for A records, and one for AAAA records.  Each time an address</td><td> </td><td class="right">   one for A records, and one for AAAA records.  Each time an address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   'add' event is seen, either for an 'A' record or an 'AAAA' record,</td><td> </td><td class="right">   'add' event is seen, either for an 'A' record or an 'AAAA' record,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the partner adds the address to the list of addresses belonging to</td><td> </td><td class="right">   the partner adds the address to the list of addresses belonging to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that partner.</td><td> </td><td class="right">   that partner.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0028"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">2.<span class="delete">8</span>.  Establishing Communication with a replication partner</td><td> </td><td class="rblock">2.<span class="insert">5</span>.  Establishing Communication with a replication partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When an address is added to a partner's address list, the partner</td><td> </td><td class="right">   When an address is added to a partner's address list, the partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   first checks to see if the address is one of its own addresses.  If</td><td> </td><td class="right">   first checks to see if the address is one of its own addresses.  If</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   so, then the partner is marked "me", and no connection is attempted</td><td> </td><td class="right">   so, then the partner is marked "me", and no connection is attempted</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   to it.  This is somewhat safer than comparing hostnames, since a</td><td> </td><td class="right">   to it.  This is somewhat safer than comparing hostnames, since a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   hostname collision can result in renaming.</td><td> </td><td class="right">   hostname collision can result in renaming.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If the partner is not marked 'me', then the partner checks to see if</td><td> </td><td class="right">   If the partner is not marked 'me', then the partner checks to see if</td><td class="lineno"></td></tr>
      <tr id="diff0029"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   it has an existing connection to that partner.  If it does not, then</td><td> </td><td class="rblock">   it has an existing <span class="insert">outgoing</span> connection to that partner.  If it does</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   it checks to see whether it has disabled outgoing connections to that</td><td> </td><td class="rblock">   not, then it checks to see whether it has disabled outgoing</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   partner.  If not, then it <span class="delete">determines whether it should initiate a</span></td><td> </td><td class="rblock">   connections to that partner.  If not, then it <span class="insert">attempts to connect</span> on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   connection</span> on the new address.</td><td> </td><td class="rblock">   the new address.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">While a partner is in discovery phase as described in Section 2.4 it</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   initiates connection with the other discovered partners.  While in</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   this phase the partner does not yet advertise SRP replication service</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   so other partners cannot discover it over DNS-SD.  If the partner is</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   not in discover phase then partner IDs are used to determine which</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   partner should initiate the connection.  The partner with numerically</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   larger ID in the sense as defined in serial number arithmetic</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   [RFC1982] initiates connection with the one with smaller ID.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0030"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   When a connection <span class="delete">fails and if there are multiple addresses</span></td><td> </td><td class="rblock">   When a connection <span class="insert">fails, it</span> advances to the next address in the <span class="insert">list,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   associated with partner, the connecting partner</span> advances to the next</td><td> </td><td class="rblock"><span class="insert">   if there is one.</span>  If there are no remaining addresses, the partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   address in the <span class="delete">list.</span>  If there are no remaining addresses, the</td><td> </td><td class="rblock">   sets a timer for RECONNECT_INTERVAL seconds.  When this timer</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   partner sets a timer for RECONNECT_INTERVAL seconds.  When this timer</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   expires, it starts again at the beginning of the list and attempts to</td><td> </td><td class="right">   expires, it starts again at the beginning of the list and attempts to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connect to the first address, iterating again across the list until a</td><td> </td><td class="right">   connect to the first address, iterating again across the list until a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection succeeds or it runs out of addresses.</td><td> </td><td class="right">   connection succeeds or it runs out of addresses.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Additionally, when an address is added, it is checked against the</td><td> </td><td class="right">   Additionally, when an address is added, it is checked against the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   list of unidentified incoming connections.  If a match is found, and</td><td> </td><td class="right">   list of unidentified incoming connections.  If a match is found, and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the partner is marked "me," then the unidentified connection is</td><td> </td><td class="right">   the partner is marked "me," then the unidentified connection is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   removed from the list and dropped.  Otherwise, it is attributed to</td><td> </td><td class="right">   removed from the list and dropped.  Otherwise, it is attributed to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the matching partner, and the protocol is started at the point of</td><td> </td><td class="right">   the matching partner, and the protocol is started at the point of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   receiving an incoming connection.</td><td> </td><td class="right">   receiving an incoming connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0031"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">2.9.</span>  Incoming connections</td><td> </td><td class="rblock">   <span class="insert">When an outgoing connection succeeds, the partner sends its server</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   ID.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">2.6.</span>  Incoming connections</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When an incoming connection is received, it is checked against the</td><td> </td><td class="right">   When an incoming connection is received, it is checked against the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   partner list based on the source address of the incoming connection.</td><td> </td><td class="right">   partner list based on the source address of the incoming connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If the address appears on the list of addresses for a partner, then</td><td> </td><td class="right">   If the address appears on the list of addresses for a partner, then</td><td class="lineno"></td></tr>
      <tr id="diff0032"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the connection is attributed to that partner.  If <span class="delete">there</span> is <span class="delete">already an</span></td><td> </td><td class="rblock">   the connection is attributed to that partner.  If <span class="insert">no matching partner</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   existing connection with the same partner,</span> the <span class="delete">existing</span> connection</td><td> </td><td class="rblock">   is <span class="insert">found, a timer of UNIDENTIFIED_PARTNER_TIMEOUT seconds is set, and</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">will be marked as stable and can closed.</span></td><td> </td><td class="rblock">   the <span class="insert">incoming</span> connection <span class="insert">is added to the list of "unidentified"</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   connections.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0033"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">2.10.  Initial synchronization</span></td><td> </td><td class="rblock">   <span class="insert">If a matching partner is found, then the partner waits for an</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   incoming partner ID.  When such an ID is received, it is compared to</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the partner's server-id.  If the incoming server ID is the same as or</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   greater than the partner's server ID, the connection is dropped.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   Otherwise, the connection proceeds to the "initial synchronization"</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   state.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0034"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The connecting partner begins</span> the <span class="delete">session by sending a session</span></td><td> </td><td class="rblock"><span class="insert">2.7.  Eliminating extra connections</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   message which includes its</span> partner ID <span class="delete">and also indicating whether or</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   not it is a "new partner" and still in discovery phase.  The</span></td><td> </td><td class="rblock"><span class="insert">   When an outgoing connection succeeds,</span> the partner <span class="insert">sends its server</span> ID</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   receiving partner waits</span> to <span class="delete">receive such a message.  If</span> the <span class="delete">message</span></td><td> </td><td class="rblock">   to the <span class="insert">partner.  When an incoming connection succeeds,</span> the partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   indicates that</span> the <span class="delete">connecting</span> partner <span class="delete">is</span> a <span class="delete">"new partner", the</span></td><td> </td><td class="rblock">   <span class="insert">waits for</span> a <span class="insert">server ID.  Because both connections are</span> partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   connection is accepted.  Otherwise, the receiving</span> partner <span class="delete">checks</span> the</td><td> </td><td class="rblock">   <span class="insert">connections, and we only need one connection,</span> the partner <span class="insert">with the</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   partner <span class="delete">IDs</span> as <span class="delete">described in Section 2.8 to validate that</span> the <span class="delete">its</span></td><td> </td><td class="rblock"><span class="insert">   higher server ID acts</span> as the <span class="insert">client and the</span> partner <span class="insert">with</span> the <span class="insert">lower</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   partner <span class="delete">ID is numerically smaller (in</span> the <span class="delete">sense</span> as <span class="delete">defined in serial</span></td><td> </td><td class="rblock"><span class="insert">   server ID acts</span> as <span class="insert">the server.  If the server IDs are equal, then</span> the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   number arithmetic [RFC1982]) than</span> the connecting <span class="delete">partner's</span> ID.  If</td><td> </td><td class="rblock">   connecting <span class="insert">server generates a new server ID, updates its TXT record,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the connection survives the comparison, then the <span class="delete">partner</span> sends a</td><td> </td><td class="rblock"><span class="insert">   and re-does the comparison.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   response to the session message and waits for the <span class="delete">connecting partner</span></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   to request a list of update candidates.</td><td> </td><td class="rblock"><span class="insert">2.8.  Initial synchronization</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert"></span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   The connecting partner begins the session by sending its server</span> ID.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">The receiving partner waits for a server ID, and when it receives</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   one, does the server ID comparison mentioned earlier.</span>  If the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   connection survives the comparison, then the <span class="insert">server</span> sends a response</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   to the session message and waits for the <span class="insert">client</span> to request a list of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   update candidates.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The connecting partner waits for a response to the initial session</td><td> </td><td class="right">   The connecting partner waits for a response to the initial session</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   message, and when it is received, requests that the server send</td><td> </td><td class="right">   message, and when it is received, requests that the server send</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   candidates.</td><td> </td><td class="right">   candidates.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0035"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">2.<span class="delete">10</span>.1.  Sending candidates</td><td> </td><td class="rblock">2.<span class="insert">8</span>.1.  Sending candidates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a partner receives a "send candidates" message that it is</td><td> </td><td class="right">   When a partner receives a "send candidates" message that it is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   expecting to receive, it generates a candidate list from the list of</td><td> </td><td class="right">   expecting to receive, it generates a candidate list from the list of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   known SRP clients.  This list includes SRP clients that have</td><td> </td><td class="right">   known SRP clients.  This list includes SRP clients that have</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   registered directly with the partner, and SRP clients that have been</td><td> </td><td class="right">   registered directly with the partner, and SRP clients that have been</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   received through SRP replication updates.  Each candidate contains a</td><td> </td><td class="right">   received through SRP replication updates.  Each candidate contains a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   hostname, a time offset, and a key identifier.</td><td> </td><td class="right">   hostname, a time offset, and a key identifier.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The key identifier is computed as follows:</td><td> </td><td class="right">   The key identifier is computed as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-5" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-5"><em> page 13, line 10<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-5"><em> page 15, line 10<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a partner receives a "send candidates" response, if it is the</td><td> </td><td class="right">   When a partner receives a "send candidates" response, if it is the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   server, it sends its own "send candidates" message, and processes any</td><td> </td><td class="right">   server, it sends its own "send candidates" message, and processes any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   proposed candidates.</td><td> </td><td class="right">   proposed candidates.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a partner that is a server receives a "send candidates"</td><td> </td><td class="right">   When a partner that is a server receives a "send candidates"</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response, it goes into the "routine operation" state.  When a partner</td><td> </td><td class="right">   response, it goes into the "routine operation" state.  When a partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that is a client sends its "send candidates" response, it goes into</td><td> </td><td class="right">   that is a client sends its "send candidates" response, it goes into</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the "routine operation" state.</td><td> </td><td class="right">   the "routine operation" state.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0036"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">2.<span class="delete">11</span>.  Routine Operation</td><td> </td><td class="rblock">2.<span class="insert">9</span>.  Routine Operation</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   During routine operation, whenever an update is successfully</td><td> </td><td class="right">   During routine operation, whenever an update is successfully</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   processed from an SRP client, the partner that received that update</td><td> </td><td class="right">   processed from an SRP client, the partner that received that update</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   queues that update to be sent to each partner to which it has a</td><td> </td><td class="right">   queues that update to be sent to each partner to which it has a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection, whether server or client.  If there are no updates</td><td> </td><td class="right">   connection, whether server or client.  If there are no updates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   pending to a particular client, the update is sent immediately.</td><td> </td><td class="right">   pending to a particular client, the update is sent immediately.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Otherwise, it's send when the outstanding update is acknowledged.</td><td> </td><td class="right">   Otherwise, it's send when the outstanding update is acknowledged.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When during routine operation a partner receives a host update from</td><td> </td><td class="right">   When during routine operation a partner receives a host update from</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   its partner, it immediately applies that update to its local SRP</td><td> </td><td class="right">   its partner, it immediately applies that update to its local SRP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-6" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-6"><em> page 13, line 32<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-6"><em> page 15, line 32<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   more current than a copy of the host information in its database.</td><td> </td><td class="right">   more current than a copy of the host information in its database.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.  Protocol Details</td><td> </td><td class="right">3.  Protocol Details</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The DNS-SD SRP Replication Protocol (henceforth SRPL) is based on DNS</td><td> </td><td class="right">   The DNS-SD SRP Replication Protocol (henceforth SRPL) is based on DNS</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Stateful Operations [RFC8490].  Each SRP replication partner creates</td><td> </td><td class="right">   Stateful Operations [RFC8490].  Each SRP replication partner creates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   a listener on port 853, the DNS-over-TLS [RFC7858] reserved port.</td><td> </td><td class="right">   a listener on port 853, the DNS-over-TLS [RFC7858] reserved port.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   This listener can be used for other DNS requests as well.</td><td> </td><td class="right">   This listener can be used for other DNS requests as well.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Participants in the protocol are partners.  To distinguish between</td><td> </td><td class="right">   Participants in the protocol are partners.  To distinguish between</td><td class="lineno"></td></tr>
      <tr id="diff0037"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   partners, the terms "partner" and <span class="delete">"remote partner"</span> are used.</td><td> </td><td class="rblock">   partners, the terms "partner" and <span class="insert">"partner"</span> are used.  "Partner"</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   "Partner" refers to the partner that is communicating or receiving</td><td> </td><td class="rblock">   refers to the partner that is communicating or receiving</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   communication.  <span class="delete">"Remote partner"</span> refers to the other partner.</td><td> </td><td class="rblock">   communication.  <span class="insert">"Partner"</span> refers to the other partner.  Partners can</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Partners can be clients or servers: a partner that has established a</td><td> </td><td class="rblock">   be clients or servers: a partner that has established a connection to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   connection to <span class="delete">another one</span> is a client; a partner that has received a</td><td> </td><td class="rblock">   <span class="insert">a partner</span> is a client; a partner that has received a connection from</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   connection from <span class="delete">another one</span> is a server.</td><td> </td><td class="rblock">   <span class="insert">a partner</span> is a server.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.1.  DNS Stateful Operations considerations</td><td> </td><td class="right">3.1.  DNS Stateful Operations considerations</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DNS Stateful Operations is a DNS per-connection session management</td><td> </td><td class="right">   DNS Stateful Operations is a DNS per-connection session management</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   protocol.  DNS Push session management includes session establishment</td><td> </td><td class="right">   protocol.  DNS Push session management includes session establishment</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   as well as session maintenance.</td><td> </td><td class="right">   as well as session maintenance.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.1.1.  DSO Session Establishment</td><td> </td><td class="right">3.1.1.  DSO Session Establishment</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An DSO session for an SRPL connection can be established either by</td><td> </td><td class="right">   An DSO session for an SRPL connection can be established either by</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-7" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-7"><em> page 14, line 17<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-7"><em> page 16, line 17<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   DSO sessions can be active or idle.  As long as the SRPL protocol is</td><td> </td><td class="right">   DSO sessions can be active or idle.  As long as the SRPL protocol is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   active on a connection, the DSO state of the connection is active.</td><td> </td><td class="right">   active on a connection, the DSO state of the connection is active.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DSO sessions require occasional keepalive messages.  The default of</td><td> </td><td class="right">   DSO sessions require occasional keepalive messages.  The default of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   fifteen seconds is adequate for SRPL.</td><td> </td><td class="right">   fifteen seconds is adequate for SRPL.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An idle DSO session must persist for long enough that there is a</td><td> </td><td class="right">   An idle DSO session must persist for long enough that there is a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   chance for the browse that identifies it to succeed.  Therefore, the</td><td> </td><td class="right">   chance for the browse that identifies it to succeed.  Therefore, the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   minimum DSO session inactivity timeout is</td><td> </td><td class="right">   minimum DSO session inactivity timeout is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   2*UNIDENTIFIED_PARTNER_TIMEOUT seconds.</td><td> </td><td class="right">   2*UNIDENTIFIED_PARTNER_TIMEOUT seconds.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0038"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">3.2.  <span class="delete">SRPL Messages</span></td><td> </td><td class="rblock">3.2.  DSO <span class="insert">Primary</span> TLVs</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   SRPL uses</span> DSO <span class="delete">message format where a message begins with a primary</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   TLV and can contain secondary</span> TLVs <span class="delete">with additional information</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   (Section 5.4 of [RFC8490]).  SRPL uses DSO request and response</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   message types.  The recipient of a request is expected to send a</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   response message with same primary TLV.  SRPL does not define or use</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   any unidirectional DSO message.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   To ensure future compatibility, when processing a received SRPL</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   message, any unrecognized secondary TLV or additional TLV value in</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the currently defined SRPL TLVs MUST be silently ignored, and the</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   remainder of the message is interpreted and handled as if the</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   unrecognized parts were not present (Section 5.4.5 of [RFC8490]).</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   However, if an received SRPL message does not follow the required</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   format and policies specified below (for example, it does not include</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   a required secondary TLV or it is received at incorrect time or sent</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   by incorrect partner) it MUST be treated as a "fatal error" and the</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   connection MUST be forcibly aborted immediately as in Section 5.3.1</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   of [RFC8490]).</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0039"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">The SRPL messages</span> and <span class="delete">their corresponding</span> primary TLVs used in the</td><td> </td><td class="rblock">   <span class="insert">Each DSO message begins with a primary TLV,</span> and <span class="insert">contains secondary</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   SRPL protocol are as follows:</td><td> </td><td class="rblock"><span class="insert">   TLVs with additional information.  The</span> primary TLVs used in the SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   protocol are as follows:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.1.  SRPL Session</td><td> </td><td class="right">3.2.1.  SRPL Session</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DSO-TYPE code: SRPLSession.  Introduces the SRPL session.  The SRPL</td><td> </td><td class="right">   DSO-TYPE code: SRPLSession.  Introduces the SRPL session.  The SRPL</td><td class="lineno"></td></tr>
      <tr id="diff0040"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   session TLV contains the <span class="delete">partner ID as an unsigned 64-bit value.</span></td><td> </td><td class="rblock">   session TLV contains <span class="insert">no data, just</span> the <span class="insert">type and length.</span>  SRPL Session</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   SRPL Session requests <span class="delete">can optionally</span> include <span class="delete">SRPL New Partner TLV as</span></td><td> </td><td class="rblock">   <span class="insert">primary TLV</span> requests <span class="insert">do not</span> include <span class="insert">any</span> secondary <span class="insert">TLVs.</span>  SRPL <span class="insert">Session</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   a</span> secondary <span class="delete">TLV.  The inclusion of the</span> SRPL <span class="delete">New Partner TLV indicates</span></td><td> </td><td class="rblock"><span class="insert">   requests are DSO requests:</span> the <span class="insert">recipient</span> is <span class="insert">expected to send</span> a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   whether</span> the <span class="delete">partner</span> is a <span class="delete">new partner</span> and <span class="delete">still in its discovery</span></td><td> </td><td class="rblock">   <span class="insert">response TLV.  Both request</span> and <span class="insert">response TLVs have the same format.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   phase.</span>  SRPL Session <span class="delete">request MUST only be sent by the partner acting</span></td><td> </td><td class="rblock"><span class="insert">   An</span> SRPL Session <span class="insert">response may include an SRPL Precedence secondary</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   as a client.</span></td><td> </td><td class="rblock"><span class="insert">   TLV.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.1.1.  SRPL client behavior</td><td> </td><td class="right">3.2.1.1.  SRPL client behavior</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The SRPL Session request is sent by a partner acting as a client to</td><td> </td><td class="right">   The SRPL Session request is sent by a partner acting as a client to</td><td class="lineno"></td></tr>
      <tr id="diff0041"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   its <span class="delete">remote</span> partner once the TLS connection to the partner, acting as</td><td> </td><td class="rblock">   its partner once the TLS connection to the partner, acting as a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   a server, has succeeded.  The SRPL session message establishes the</td><td> </td><td class="rblock">   server, has succeeded.  The SRPL session message establishes the DSO</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   DSO connection as an <span class="delete">SRPL</span> protocol connection.  If it is the first</td><td> </td><td class="rblock">   connection as an <span class="insert">SRP</span> protocol connection.  If it is the first DSO</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   DSO message sent by the partner acting as a client, then it also</td><td> </td><td class="rblock">   message sent by the partner acting as a client, then it also</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   establishes the DSO session.</td><td> </td><td class="right">   establishes the DSO session.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When the SRPL partner acting as a client receives a response to its</td><td> </td><td class="right">   When the SRPL partner acting as a client receives a response to its</td><td class="lineno"></td></tr>
      <tr id="diff0042"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   SRPL session <span class="delete">message from server,</span> it sends an SRPL Send Candidates</td><td> </td><td class="rblock">   SRPL session <span class="insert">message,</span> it sends an SRPL Send Candidates message.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">request</span> message.</td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">When an SRPL partner receives an SRPL Precedence secondary TLV in an</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   SRPL Session response, if it thinks it is connected to the primary</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   partner, it sets its precedence to the assigned value.  If it thinks</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   it is connecting to a non-primary, then it disconnects and waits</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   NON_PRIMARY_RESETTLE_TIME seconds before reconnecting.  It also</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   attempts to reconfirm the service advertisement for the partner it</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   thinks is primary.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.1.2.  SRPL server behavior</td><td> </td><td class="right">3.2.1.2.  SRPL server behavior</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An SRPL partner acting as a server that receives an SRPL Session</td><td> </td><td class="right">   An SRPL partner acting as a server that receives an SRPL Session</td><td class="lineno"></td></tr>
      <tr id="diff0043"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   request checks to see if the <span class="delete">SRPL sess</span>ion on which it was received is</td><td> </td><td class="rblock">   request checks to see if the <span class="insert">connect</span>ion on which it was received is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   already established.  If so, this is a protocol error, and the SRPL</td><td> </td><td class="right">   already established.  If so, this is a protocol error, and the SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   partner MUST drop the connection.</td><td> </td><td class="right">   partner MUST drop the connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0044"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   When <span class="delete">the server</span> receives an SRPL Session request, <span class="delete">it checks</span> the</td><td> </td><td class="rblock">   When <span class="insert">an SRPL partner that is primary</span> receives an SRPL Session</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">presence of</span> SRPL <span class="delete">New Partner secondary TLV.  If this secondary TLV is</span></td><td> </td><td class="rblock">   request, the SRPL Session <span class="insert">response MUST include an SRPL Precedence</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   included in the</span> Session <span class="delete">request, then sever sends</span> a <span class="delete">Session response.</span></td><td> </td><td class="rblock"><span class="insert">   secondary TLV, which assigns</span> a <span class="insert">precedence to</span> the <span class="insert">connecting</span> SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   If</span> the SRPL <span class="delete">New partner is not present, then the server checks the</span></td><td> </td><td class="rblock">   <span class="insert">partner.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   partner IDs and validates that the its partner ID is numerically</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   smaller (in the sense as defined in serial number arithmetic</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   [RFC1982]) than the client's partner ID from the Session TLV in the</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   request.  If the connection survives the ID comparison, then its</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   sends a Session response.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.2.  SRPL Send Candidates</td><td> </td><td class="right">3.2.2.  SRPL Send Candidates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0045"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   DSO-TYPE code: SRPLSendCandidates.  Requests the <span class="delete">remote</span> partner to</td><td> </td><td class="rblock">   DSO-TYPE code: SRPLSendCandidates.  Requests the partner to send its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   send its candidates list.  The SRPL Send Candidates <span class="delete">TLV</span> contains no</td><td> </td><td class="rblock">   candidates list.  The SRPL Send Candidates <span class="insert">message</span> contains no</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">value.</span>  The SRPL Send Candidates <span class="delete">message</span> does not include any</td><td> </td><td class="rblock">   <span class="insert">additional data.</span>  The SRPL Send Candidates <span class="insert">primary TLV</span> does not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   secondary TLVs.</td><td> </td><td class="rblock">   include any secondary TLVs.  <span class="insert">SRPL Send Candidates messages are DSO</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   requests: the recipient is expected to send a response TLV.  Both</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   request and response TLVs have the same format.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.2.1.  SRPL client behavior</td><td> </td><td class="right">3.2.2.1.  SRPL client behavior</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An SRPL partner acting as a client MUST send an SRPL Send Candidates</td><td> </td><td class="right">   An SRPL partner acting as a client MUST send an SRPL Send Candidates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   request after it has received an SRPL Session response.  It MUST NOT</td><td> </td><td class="right">   request after it has received an SRPL Session response.  It MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   send this request at any other time.</td><td> </td><td class="right">   send this request at any other time.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An SRPL partner acting as a client expects to receive an SRPL Send</td><td> </td><td class="right">   An SRPL partner acting as a client expects to receive an SRPL Send</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Candidates message after it has received an SRPL Send Candidates</td><td> </td><td class="right">   Candidates message after it has received an SRPL Send Candidates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response.  If it receives an SRPL Send Candidates message at any</td><td> </td><td class="right">   response.  If it receives an SRPL Send Candidates message at any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-8" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-8"><em> page 16, line 22<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-8"><em> page 18, line 8<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   An SRPL partner acting as a server MUST send an SRPL Send Candidates</td><td> </td><td class="right">   An SRPL partner acting as a server MUST send an SRPL Send Candidates</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   request after it has sent an SRPL Send Candidates response.</td><td> </td><td class="right">   request after it has sent an SRPL Send Candidates response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   An SRPL partner acting as a server MUST enter the "normal operations"</td><td> </td><td class="right">   An SRPL partner acting as a server MUST enter the "normal operations"</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   state after receiving an SRPL Send Candidates response from its</td><td> </td><td class="right">   state after receiving an SRPL Send Candidates response from its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   partner.</td><td> </td><td class="right">   partner.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.3.  SRPL Candidate</td><td> </td><td class="right">3.2.3.  SRPL Candidate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DSO-TYPE code: SRPLCandidate.  Announces the availability of a</td><td> </td><td class="right">   DSO-TYPE code: SRPLCandidate.  Announces the availability of a</td><td class="lineno"></td></tr>
      <tr id="diff0046"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   specific candidate SRP client registration.  The SRPL Candidate <span class="delete">TLV</span></td><td> </td><td class="rblock">   specific candidate SRP client registration.  The SRPL Candidate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   contains no <span class="delete">value.</span></td><td> </td><td class="rblock">   <span class="insert">message</span> contains no <span class="insert">additional data.  SRPL Candidate messages are DSO</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   requests: the recipient is expected to send a response TLV.  Both</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   request and response TLVs have the same format.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.3.1.  Required secondary TLVs</td><td> </td><td class="right">3.2.3.1.  Required secondary TLVs</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The SRPL Candidate request MUST include the following secondary TLVs:</td><td> </td><td class="right">   The SRPL Candidate request MUST include the following secondary TLVs:</td><td class="lineno"></td></tr>
      <tr id="diff0047"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   SRPL Hostname, SRPL Time Offset, and SRPL Key ID.</td><td> </td><td class="rblock">   SRPL Hostname, SRPL Time Offset, and SRPL Key ID.  <span class="insert">If an SRPL partner</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   receives an SRPL Candidate request that doesn't contain all of these</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   secondary TLVs, this is a protocol error, and the partner MUST drop</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   the connection.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0048"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The SRPL Candidate response MUST include <span class="delete">exactly</span> one of the following</td><td> </td><td class="rblock">   The SRPL Candidate response MUST include one of the following status</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   status TLVs: SRPL Candidate Yes, SRPL Candidate No, or SRPL Conflict.</td><td> </td><td class="rblock">   TLVs: SRPL Candidate Yes, SRPL Candidate No, or SRPL Conflict.  If an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If an SRPL partner receives an SRPL Candidate response which does not</td><td> </td><td class="rblock">   SRPL partner receives an SRPL Candidate response which does not</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   contain exactly one of these TLVS, this is a protocol error, and the</td><td> </td><td class="right">   contain exactly one of these TLVS, this is a protocol error, and the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   partner MUST drop the connection.</td><td> </td><td class="right">   partner MUST drop the connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.3.2.  SRPL partner common behavior</td><td> </td><td class="right">3.2.3.2.  SRPL partner common behavior</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRPL partners expect to receive SRPL Candidate messages between the</td><td> </td><td class="right">   SRPL partners expect to receive SRPL Candidate messages between the</td><td class="lineno"></td></tr>
      <tr id="diff0049"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   time that they have sent an SRPL Send Candidates <span class="delete">request</span> message and</td><td> </td><td class="rblock">   time that they have sent an SRPL Send Candidates message and the time</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the time that they have received an SRPL Send Candidates response.</td><td> </td><td class="rblock">   that they have received an SRPL Send Candidates response.  If an SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   If an SRPL Candidate message is received at any other time, this is a</td><td> </td><td class="rblock">   Candidate message is received at any other time, this is a protocol</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   protocol error, and the partner MUST drop the connection.</td><td> </td><td class="rblock">   error, and the partner MUST drop the connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Partners MUST NOT send SRPL Candidate requests if they have sent any</td><td> </td><td class="right">   Partners MUST NOT send SRPL Candidate requests if they have sent any</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRPL Candidate or SRPL host requests that have not yet received</td><td> </td><td class="right">   SRPL Candidate or SRPL host requests that have not yet received</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   responses.  Partners receiving SRPL Candidate requests when they have</td><td> </td><td class="right">   responses.  Partners receiving SRPL Candidate requests when they have</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   not yet responded to an outstanding SRPL Candidate request or SRPL</td><td> </td><td class="right">   not yet responded to an outstanding SRPL Candidate request or SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Host request MUST treat this as a protocol failure and drop the</td><td> </td><td class="right">   Host request MUST treat this as a protocol failure and drop the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   connection.</td><td> </td><td class="right">   connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When a partner receives a valid SRPL Candidate message, it checks its</td><td> </td><td class="right">   When a partner receives a valid SRPL Candidate message, it checks its</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRP registration database for a host that matches both the SRPL</td><td> </td><td class="right">   SRP registration database for a host that matches both the SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-9" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-9"><em> page 17, line 30<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-9"><em> page 19, line 20<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   - 'local update time' is greater than SRPL_UPDATE_SKEW_WINDOW, then</td><td> </td><td class="right">   - 'local update time' is greater than SRPL_UPDATE_SKEW_WINDOW, then</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the candidate update is more recent than the current SRP</td><td> </td><td class="right">   the candidate update is more recent than the current SRP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   registration.  In this case, the partner sends an SRPL Candidate</td><td> </td><td class="right">   registration.  In this case, the partner sends an SRPL Candidate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   response and includes the SRPL Candidate Yes secondary TLV.  The</td><td> </td><td class="right">   response and includes the SRPL Candidate Yes secondary TLV.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   reason for adding in some skew is to account for network transmission</td><td> </td><td class="right">   reason for adding in some skew is to account for network transmission</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   delays.</td><td> </td><td class="right">   delays.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.4.  SRPL Host</td><td> </td><td class="right">3.2.4.  SRPL Host</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DSO-TYPE code: SRPLHost.  Provides the content of a particular SRP</td><td> </td><td class="right">   DSO-TYPE code: SRPLHost.  Provides the content of a particular SRP</td><td class="lineno"></td></tr>
      <tr id="diff0050"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   client registration.  The SRPL Host <span class="delete">TLV</span> contains no <span class="delete">value.</span></td><td> </td><td class="rblock">   client registration.  The SRPL Host <span class="insert">message</span> contains no <span class="insert">additional</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   data.  SRPL Host messages are DSO requests: the recipient is expected</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   to send a response TLV.  Both request and response TLVs have the same</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">   format.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.4.1.  Required secondary TLVs</td><td> </td><td class="right">3.2.4.1.  Required secondary TLVs</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   The SRPL Host request MUST include the following secondary TLVs: SRPL</td><td> </td><td class="right">   The SRPL Host request MUST include the following secondary TLVs: SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Hostname, SRPL Key ID, and one or more SRPL Host Message TLVs.  If an</td><td> </td><td class="right">   Hostname, SRPL Key ID, and one or more SRPL Host Message TLVs.  If an</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRPL partner receives an SRPL Candidate request that doesn't contain</td><td> </td><td class="right">   SRPL partner receives an SRPL Candidate request that doesn't contain</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   all of these secondary TLVs, this is a protocol error, and the</td><td> </td><td class="right">   all of these secondary TLVs, this is a protocol error, and the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   partner MUST drop the connection.</td><td> </td><td class="right">   partner MUST drop the connection.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0051"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   The SRPL Host <span class="delete">request MUST</span> always <span class="delete">include</span> at least one SRPL Host</td><td> </td><td class="rblock">   The SRPL Host <span class="insert">message</span> always <span class="insert">includes</span> at least one SRPL Host Message</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Message TLV, which contains the most recent update the SRP server has</td><td> </td><td class="rblock">   TLV, which contains the most recent update the SRP server has</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   received for that host.  However, in some cases an update for a host</td><td> </td><td class="right">   received for that host.  However, in some cases an update for a host</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   may update some, but not all, service instances that reference that</td><td> </td><td class="right">   may update some, but not all, service instances that reference that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   host; in this case, the SRPL Host request MUST include all of the</td><td> </td><td class="right">   host; in this case, the SRPL Host request MUST include all of the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   previously received SRP updates that would be required to reconstruct</td><td> </td><td class="right">   previously received SRP updates that would be required to reconstruct</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the current state of the host registration on the server sending the</td><td> </td><td class="right">   the current state of the host registration on the server sending the</td><td class="lineno"></td></tr>
      <tr id="diff0052"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   SRPL Host request.  <span class="delete">The SRPL Host Message TLVs MUST be included in</span></td><td> </td><td class="rblock">   SRPL Host request.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   order based on the time offset they were received and processed on</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the SRP server starting with the earliest message and ending with</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   most recent one.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.2.4.2.  SRPL partner common behavior during synchronization</td><td> </td><td class="right">3.2.4.2.  SRPL partner common behavior during synchronization</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRPL partners expect to receive either zero or one SRPL Host requests</td><td> </td><td class="right">   SRPL partners expect to receive either zero or one SRPL Host requests</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   after sending an SRPL Candidate response with a SRPL Candidate Yes</td><td> </td><td class="right">   after sending an SRPL Candidate response with a SRPL Candidate Yes</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   secondary TLV.  If an SRPL Host request is received at any other time</td><td> </td><td class="right">   secondary TLV.  If an SRPL Host request is received at any other time</td><td class="lineno"></td></tr>
      <tr id="diff0053"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   during <span class="delete">initial</span> synchronization, this is a protocol error, and the</td><td> </td><td class="rblock">   during synchronization, this is a protocol error, and the partner</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   partner MUST drop the connection.  The only time that an SRPL Host</td><td> </td><td class="rblock">   MUST drop the connection.  The only time that an SRPL Host request</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   request would _not_ follow a positive SRPL Candidate response would</td><td> </td><td class="rblock">   would _not_ follow a positive SRPL Candidate response would be when</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   be when the candidate host entry's lease expired after the SRPL</td><td> </td><td class="rblock">   the candidate host entry's lease expired after the SRPL Candidate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Candidate request was sent but before the SRPL Candidate response was</td><td> </td><td class="rblock">   request was sent but before the SRPL Candidate response was received.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   received.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRPL partners send SRPL Host requests during synchronization when a</td><td> </td><td class="right">   SRPL partners send SRPL Host requests during synchronization when a</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   valid SRPL Candidate response has been received that includes an SRPL</td><td> </td><td class="right">   valid SRPL Candidate response has been received that includes an SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Candidate Yes secondary TLV.  The host request is generated based on</td><td> </td><td class="right">   Candidate Yes secondary TLV.  The host request is generated based on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the current candidate (the one for which the SRPL Candidate request</td><td> </td><td class="right">   the current candidate (the one for which the SRPL Candidate request</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   being responded to was send).</td><td> </td><td class="right">   being responded to was send).</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0054"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">3.2.4.3.  SRPL partner common behavior during <span class="delete">routine</span> operations</td><td> </td><td class="rblock">3.2.4.3.  SRPL partner common behavior during <span class="insert">normal</span> operations</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0055"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   When an SRPL partner during <span class="delete">routine</span> operations receives and has</td><td> </td><td class="rblock">   When an SRPL partner during <span class="insert">normal</span> operations receives and has</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   successfully validated an SRP update from an SRP client, it MUST send</td><td> </td><td class="right">   successfully validated an SRP update from an SRP client, it MUST send</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   that update to each of its connected partners as an SRPL Host</td><td> </td><td class="right">   that update to each of its connected partners as an SRPL Host</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   request.  If the connection to a particular partner is not busy, and</td><td> </td><td class="right">   request.  If the connection to a particular partner is not busy, and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   there are no updates already queued to be sent, it MUST send the SRPL</td><td> </td><td class="right">   there are no updates already queued to be sent, it MUST send the SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Host message immediately.  Otherwise, it MUST queue the update to</td><td> </td><td class="right">   Host message immediately.  Otherwise, it MUST queue the update to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   send when possible.  The queue MUST be first-in, first-out.</td><td> </td><td class="right">   send when possible.  The queue MUST be first-in, first-out.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   After an SRPL partner has sent an SRPL Host request to a partner, and</td><td> </td><td class="right">   After an SRPL partner has sent an SRPL Host request to a partner, and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   before it receives a corresponding SRPL Host response, it MUST NOT</td><td> </td><td class="right">   before it receives a corresponding SRPL Host response, it MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   send any more SRPL Host messages to that partner.</td><td> </td><td class="right">   send any more SRPL Host messages to that partner.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0056"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   When an SRPL partner receives an SRPL Host request during <span class="delete">routine</span></td><td> </td><td class="rblock">   When an SRPL partner receives an SRPL Host request during <span class="insert">normal</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   operations, it MUST apply it immediately.  While it is being applied,</td><td> </td><td class="right">   operations, it MUST apply it immediately.  While it is being applied,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   it MUST NOT send any other SRPL Host requests to that partner.</td><td> </td><td class="right">   it MUST NOT send any other SRPL Host requests to that partner.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   When an SRPL Host request has been successfully applied by an SRPL</td><td> </td><td class="right">   When an SRPL Host request has been successfully applied by an SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   partner, the partner MUST send an SRPL Host response.</td><td> </td><td class="right">   partner, the partner MUST send an SRPL Host response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   If an SRPL partner receives an SRPL Host request while another SRPL</td><td> </td><td class="right">   If an SRPL partner receives an SRPL Host request while another SRPL</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Host request is being processed, this is a protocol error, and the</td><td> </td><td class="right">   Host request is being processed, this is a protocol error, and the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   partner MUST drop the connection to its partner.</td><td> </td><td class="right">   partner MUST drop the connection to its partner.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.  DSO Secondary TLVs</td><td> </td><td class="right">3.3.  DSO Secondary TLVs</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   In addition to the Primary TLVs used to send requests between SRPL</td><td> </td><td class="right">   In addition to the Primary TLVs used to send requests between SRPL</td><td class="lineno"></td></tr>
      <tr id="diff0057"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   partners, we define secondary TLVs to carry <span class="delete">additional</span> information</td><td> </td><td class="rblock">   partners, we define secondary TLVs to carry <span class="insert">formatter</span> information</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   needed for various SRPL requests.</td><td> </td><td class="right">   needed for various SRPL requests.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.1.  SRPL Candidate Yes</td><td> </td><td class="right">3.3.1.  SRPL Candidate Yes</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0058"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   DSO-TYPE code: SRPLCandidateYes.  <span class="delete">It contains no value, just the type</span></td><td> </td><td class="rblock">   DSO-TYPE code: SRPLCandidateYes.  In an SRPL Candidate response,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   length.</span>  In an SRPL Candidate response, indicates to the partner that</td><td> </td><td class="rblock">   indicates to the partner that an SRPL Host message for the candidate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   an SRPL Host message for the candidate is wanted and should be sent.</td><td> </td><td class="rblock">   is wanted and should be sent.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Appears as a secondary TLV in SRPL Candidate responses.  MUST NOT</td><td> </td><td class="right">   Appears as a secondary TLV in SRPL Candidate responses.  MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   appear in any other SRPL request or response.  MUST NOT appear in</td><td> </td><td class="right">   appear in any other SRPL request or response.  MUST NOT appear in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   addition to either SRPL Conflict or SRPL Candidate No secondary TLVs.</td><td> </td><td class="right">   addition to either SRPL Conflict or SRPL Candidate No secondary TLVs.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.2.  SRPL Candidate No</td><td> </td><td class="right">3.3.2.  SRPL Candidate No</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0059"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   DSO-TYPE code: SRPLCandidateNo.  <span class="delete">It contains no value, just the type</span></td><td> </td><td class="rblock">   DSO-TYPE code: SRPLCandidateNo.  In an SRPL Candidate response,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   length.</span>  In an SRPL Candidate response, indicates to the partner that</td><td> </td><td class="rblock">   indicates to the partner that an SRPL Host message for the candidate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   an SRPL Host message for the candidate is not wanted and should not</td><td> </td><td class="rblock">   is not wanted and should not be sent.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   be sent.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Appears as a secondary TLV in SRPL Candidate responses.  MUST NOT</td><td> </td><td class="right">   Appears as a secondary TLV in SRPL Candidate responses.  MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   appear in any other SRPL request or response.  MUST NOT appear in</td><td> </td><td class="right">   appear in any other SRPL request or response.  MUST NOT appear in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   addition to either SRPL Conflict or SRPL Candidate Yes secondary</td><td> </td><td class="right">   addition to either SRPL Conflict or SRPL Candidate Yes secondary</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   TLVs.</td><td> </td><td class="right">   TLVs.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.3.  SRPL Conflict</td><td> </td><td class="right">3.3.3.  SRPL Conflict</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0060"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   DSO-TYPE code: SRPLConflict.  <span class="delete">It contains no value, just the type</span></td><td> </td><td class="rblock">   DSO-TYPE code: SRPLConflict.  In an SRPL Candidate response,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   length.</span>  In an SRPL Candidate response, indicates to the partner that</td><td> </td><td class="rblock">   indicates to the partner that an SRPL Host message for the candidate</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   an SRPL Host message for the candidate is not wanted and should not</td><td> </td><td class="rblock">   is not wanted and should not be sent.  Additionally indicates that</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   be sent.  Additionally indicates that the proposed host conflicts</td><td> </td><td class="rblock">   the proposed host conflicts with local data.  This indication is</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   with local data.  This indication is informative and has no effect on</td><td> </td><td class="rblock">   informative and has no effect on processing.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   processing.</td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Appears as a secondary TLV in SRPL Candidate responses.  MUST NOT</td><td> </td><td class="right">   Appears as a secondary TLV in SRPL Candidate responses.  MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   appear in any other SRPL request or response.  MUST NOT appear in</td><td> </td><td class="right">   appear in any other SRPL request or response.  MUST NOT appear in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   addition to either SRPL Candidate Yes or SRPL Candidate No secondary</td><td> </td><td class="right">   addition to either SRPL Candidate Yes or SRPL Candidate No secondary</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   TLVs.</td><td> </td><td class="right">   TLVs.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.4.  SRPL Hostname</td><td> </td><td class="right">3.3.4.  SRPL Hostname</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DSO-TYPE code: SRPLHostname.  In an SRPL Candidate or SRPL Host</td><td> </td><td class="right">   DSO-TYPE code: SRPLHostname.  In an SRPL Candidate or SRPL Host</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   request, indicates to the partner the hostname of an SRP</td><td> </td><td class="right">   request, indicates to the partner the hostname of an SRP</td><td class="lineno"></td></tr>
      <tr id="diff0061"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   registration.  The <span class="delete">TLV value is the</span> hostname represented in DNS wire</td><td> </td><td class="rblock">   registration.  The hostname <span class="insert">is</span> represented in DNS wire format</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   format Section 3.1 of [RFC1035].</td><td> </td><td class="rblock">   Section 3.1 of [RFC1035].</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Required as a secondary TLV in SRPL Candidate and SRPL Host requests.</td><td> </td><td class="right">   Required as a secondary TLV in SRPL Candidate and SRPL Host requests.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   MUST NOT appear in any other SRPL request or response.</td><td> </td><td class="right">   MUST NOT appear in any other SRPL request or response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.5.  SRPL Host Message</td><td> </td><td class="right">3.3.5.  SRPL Host Message</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   DSO-TYPE code: SRPLHostMessage.  In an SRPL Host request, conveys</td><td> </td><td class="right">   DSO-TYPE code: SRPLHostMessage.  In an SRPL Host request, conveys</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   four data objects in order:</td><td> </td><td class="right">   four data objects in order:</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   *  the lease time and key lease time returned to the client,</td><td> </td><td class="right">   *  the lease time and key lease time returned to the client,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-10" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-10"><em> page 20, line 39<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-10"><em> page 22, line 25<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   against the signature time when checking for replay attacks.  The</td><td> </td><td class="right">   against the signature time when checking for replay attacks.  The</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   computation of the current time of signing should be done when the</td><td> </td><td class="right">   computation of the current time of signing should be done when the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   message is received to avoid clock skew that might result from</td><td> </td><td class="right">   message is received to avoid clock skew that might result from</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   processing delays.</td><td> </td><td class="right">   processing delays.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Required as a secondary TLV in SRPL Host requests.  MUST NOT appear</td><td> </td><td class="right">   Required as a secondary TLV in SRPL Host requests.  MUST NOT appear</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   in any other SRPL request or response.</td><td> </td><td class="right">   in any other SRPL request or response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.6.  SRPL Time Offset</td><td> </td><td class="right">3.3.6.  SRPL Time Offset</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0062"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   DSO-TYPE code: SRPLTimeOffset.  In an SRPL <span class="delete">Candidate request,</span> conveys</td><td> </td><td class="rblock">   DSO-TYPE code: SRPLTimeOffset.  In an SRPL <span class="insert">Candidate,</span> conveys the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   the difference between the time the SRP update was received from the</td><td> </td><td class="rblock">   difference between the time the SRP update was received from the SRP</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   SRP client and the current time on the partner generating the</td><td> </td><td class="rblock">   client and the current time on the partner generating the request, in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   request, in seconds.  <span class="delete">The time offset value is represented as</span></td><td> </td><td class="rblock">   seconds.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   unsigned 32-bit value</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0063"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   Required as a secondary TLV in SRPL Candidate requests.  MUST NOT</td><td> </td><td class="rblock">   Required as a secondary TLV in SRPL Candidate <span class="insert">and SRPL Host</span> requests.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   appear in any other SRPL request or response.</td><td> </td><td class="rblock">   MUST NOT appear in any other SRPL request or response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">3.3.7.  SRPL Key ID</td><td> </td><td class="right">3.3.7.  SRPL Key ID</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0064"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   DSO-TYPE code: SRPLKeyID.  In an SRPL <span class="delete">Candidate request,</span> conveys the</td><td> </td><td class="rblock">   DSO-TYPE code: SRPLKeyID.  In an SRPL <span class="insert">Candidate,</span> conveys the key ID</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   key ID of the SRP client.  <span class="delete">The value is an unsigned 32-bit number and</span></td><td> </td><td class="rblock">   of the SRP client.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   calculated as described in Section 2.10.1.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Required as a secondary TLV in SRPL Candidate requests.  MUST NOT</td><td> </td><td class="right">   Required as a secondary TLV in SRPL Candidate requests.  MUST NOT</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   appear in any other SRPL request or response.</td><td> </td><td class="right">   appear in any other SRPL request or response.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0065"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">3.3.8.  SRPL New Partner</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   DSO-TYPE code: SRPLNewPartnter.  It contains no value, just the type</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   length.  If included in an SRPL Session request, it indicates that</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   the partner is new and still in its discovery phase.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete"></span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   Can be optionally included as a secondary TLV in SRPL Session</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">   requests.  MUST NOT appear in any other SRPL request or response.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">4.  Security Considerations</td><td> </td><td class="right">4.  Security Considerations</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   SRP replication basically relies on the trustworthiness of hosts on</td><td> </td><td class="right">   SRP replication basically relies on the trustworthiness of hosts on</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the local network.  Since SRP itself relies on the same level of</td><td> </td><td class="right">   the local network.  Since SRP itself relies on the same level of</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   trust, SRP replication doesn't make things worse.  However, when the</td><td> </td><td class="right">   trust, SRP replication doesn't make things worse.  However, when the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   option to have a central SRP server is available, that is likely to</td><td> </td><td class="right">   option to have a central SRP server is available, that is likely to</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   be more trustworthy.</td><td> </td><td class="right">   be more trustworthy.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">5.  Delegation of 'local.arpa.'</td><td> </td><td class="right">5.  Delegation of 'local.arpa.'</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-11" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-11"><em> page 22, line 45<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-11"><em> page 24, line 37<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">    | SRPLHostname       | SRPL Hostname | No    | STD    | RFC-TBD   |</td><td> </td><td class="right">    | SRPLHostname       | SRPL Hostname | No    | STD    | RFC-TBD   |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    +--------------------+---------------+-------+--------+-----------+</td><td> </td><td class="right">    +--------------------+---------------+-------+--------+-----------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    | SRPLHostMessage    | SRPL Host     | No    | STD    | RFC-TBD   |</td><td> </td><td class="right">    | SRPLHostMessage    | SRPL Host     | No    | STD    | RFC-TBD   |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    |                    | Message       |       |        |           |</td><td> </td><td class="right">    |                    | Message       |       |        |           |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    +--------------------+---------------+-------+--------+-----------+</td><td> </td><td class="right">    +--------------------+---------------+-------+--------+-----------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    | SRPLTimeOffset     | SRPL Time     | No    | STD    | RFC-TBD   |</td><td> </td><td class="right">    | SRPLTimeOffset     | SRPL Time     | No    | STD    | RFC-TBD   |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    |                    | Offset        |       |        |           |</td><td> </td><td class="right">    |                    | Offset        |       |        |           |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    +--------------------+---------------+-------+--------+-----------+</td><td> </td><td class="right">    +--------------------+---------------+-------+--------+-----------+</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    | SRPLKeyID          | SRPL Key ID   | No    | STD    | RFC-TBD   |</td><td> </td><td class="right">    | SRPLKeyID          | SRPL Key ID   | No    | STD    | RFC-TBD   |</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">    +--------------------+---------------+-------+--------+-----------+</td><td> </td><td class="right">    +--------------------+---------------+-------+--------+-----------+</td><td class="lineno"></td></tr>
      <tr id="diff0066"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">    <span class="delete">| SRPLNewPartnter    | SRPL New      | No    | STD    | RFC-TBD   |</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">    |                    | Partner       |       |        |           |</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">    +--------------------+---------------+-------+--------+-----------+</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">                                  Table 1</td><td> </td><td class="right">                                  Table 1</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">6.3.  Registration and Delegation of 'local.arpa' as a Special-Use</td><td> </td><td class="right">6.3.  Registration and Delegation of 'local.arpa' as a Special-Use</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">      Domain Name</td><td> </td><td class="right">      Domain Name</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   IANA is requested to record the domain name local.arpa.' in the</td><td> </td><td class="right">   IANA is requested to record the domain name local.arpa.' in the</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Special-Use Domain Names registry [SUDN].  IANA is requested, with</td><td> </td><td class="right">   Special-Use Domain Names registry [SUDN].  IANA is requested, with</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   the approval of IAB, to implement the delegation requested in</td><td> </td><td class="right">   the approval of IAB, to implement the delegation requested in</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   Section 5.</td><td> </td><td class="right">   Section 5.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="part-12" class="change" ><td></td><th><small>skipping to change at</small><a href="#part-12"><em> page 23, line 27<span class="hide"> &para;</span></em></a></th><th> </th><th><small>skipping to change at</small><a href="#part-12"><em> page 25, line 13<span class="hide"> &para;</span></em></a></th><td></td></tr>
      <tr><td class="lineno"></td><td class="left">   listing this document as the reference.</td><td> </td><td class="right">   listing this document as the reference.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">7.  Informative References</td><td> </td><td class="right">7.  Informative References</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">8.  Normative References</td><td> </td><td class="right">8.  Normative References</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC1035]  Mockapetris, P., "Domain names - implementation and</td><td> </td><td class="right">   [RFC1035]  Mockapetris, P., "Domain names - implementation and</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              specification", STD 13, RFC 1035, DOI 10.17487/RFC1035,</td><td> </td><td class="right">              specification", STD 13, RFC 1035, DOI 10.17487/RFC1035,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              November 1987, &lt;https://www.rfc-editor.org/info/rfc1035&gt;.</td><td> </td><td class="right">              November 1987, &lt;https://www.rfc-editor.org/info/rfc1035&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0067"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock">   <span class="delete">[RFC1982]  Elz, R. and R. Bush, "Serial Number Arithmetic", RFC 1982,</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              DOI 10.17487/RFC1982, August 1996,</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"><span class="delete">              &lt;https://www.rfc-editor.org/info/rfc1982&gt;.</span></td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock">                                                                         </td><td> </td><td class="rblock"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC3172]  Huston, G., Ed., "Management Guidelines &amp; Operational</td><td> </td><td class="right">   [RFC3172]  Huston, G., Ed., "Management Guidelines &amp; Operational</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Requirements for the Address and Routing Parameter Area</td><td> </td><td class="right">              Requirements for the Address and Routing Parameter Area</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Domain ("arpa")", BCP 52, RFC 3172, DOI 10.17487/RFC3172,</td><td> </td><td class="right">              Domain ("arpa")", BCP 52, RFC 3172, DOI 10.17487/RFC3172,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              September 2001, &lt;https://www.rfc-editor.org/info/rfc3172&gt;.</td><td> </td><td class="right">              September 2001, &lt;https://www.rfc-editor.org/info/rfc3172&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0068"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">[RFC6762]  Cheshire, S. and M. Krochmal, "Multicast DNS", RFC 6762,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              DOI 10.17487/RFC6762, February 2013,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              &lt;https://www.rfc-editor.org/info/rfc6762&gt;.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC7858]  Hu, Z., Zhu, L., Heidemann, J., Mankin, A., Wessels, D.,</td><td> </td><td class="right">   [RFC7858]  Hu, Z., Zhu, L., Heidemann, J., Mankin, A., Wessels, D.,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              and P. Hoffman, "Specification for DNS over Transport</td><td> </td><td class="right">              and P. Hoffman, "Specification for DNS over Transport</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Layer Security (TLS)", RFC 7858, DOI 10.17487/RFC7858, May</td><td> </td><td class="right">              Layer Security (TLS)", RFC 7858, DOI 10.17487/RFC7858, May</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              2016, &lt;https://www.rfc-editor.org/info/rfc7858&gt;.</td><td> </td><td class="right">              2016, &lt;https://www.rfc-editor.org/info/rfc7858&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC8375]  Pfister, P. and T. Lemon, "Special-Use Domain</td><td> </td><td class="right">   [RFC8375]  Pfister, P. and T. Lemon, "Special-Use Domain</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              'home.arpa.'", RFC 8375, DOI 10.17487/RFC8375, May 2018,</td><td> </td><td class="right">              'home.arpa.'", RFC 8375, DOI 10.17487/RFC8375, May 2018,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc8375&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc8375&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [RFC8490]  Bellis, R., Cheshire, S., Dickinson, J., Dickinson, S.,</td><td> </td><td class="right">   [RFC8490]  Bellis, R., Cheshire, S., Dickinson, J., Dickinson, S.,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              Lemon, T., and T. Pusateri, "DNS Stateful Operations",</td><td> </td><td class="right">              Lemon, T., and T. Pusateri, "DNS Stateful Operations",</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              RFC 8490, DOI 10.17487/RFC8490, March 2019,</td><td> </td><td class="right">              RFC 8490, DOI 10.17487/RFC8490, March 2019,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.rfc-editor.org/info/rfc8490&gt;.</td><td> </td><td class="right">              &lt;https://www.rfc-editor.org/info/rfc8490&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr id="diff0069"><td></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">   <span class="insert">[RFC8765]  Pusateri, T. and S. Cheshire, "DNS Push Notifications",</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              RFC 8765, DOI 10.17487/RFC8765, June 2020,</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock"><span class="insert">              &lt;https://www.rfc-editor.org/info/rfc8765&gt;.</span></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="lblock"></td><td> </td><td class="rblock">                                                                         </td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [SUDN]     "Special-Use Domain Names Registry", July 2012,</td><td> </td><td class="right">   [SUDN]     "Special-Use Domain Names Registry", July 2012,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.iana.org/assignments/special-use-domain-</td><td> </td><td class="right">              &lt;https://www.iana.org/assignments/special-use-domain-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              names/special-use-domain-names.xhtml&gt;.</td><td> </td><td class="right">              names/special-use-domain-names.xhtml&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">   [LSDZ]     "Locally-Served DNS Zones Registry", July 2011,</td><td> </td><td class="right">   [LSDZ]     "Locally-Served DNS Zones Registry", July 2011,</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              &lt;https://www.iana.org/assignments/locally-served-dns-</td><td> </td><td class="right">              &lt;https://www.iana.org/assignments/locally-served-dns-</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">              zones/locally-served-dns-zones.xhtml&gt;.</td><td> </td><td class="right">              zones/locally-served-dns-zones.xhtml&gt;.</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left">Author's Address</td><td> </td><td class="right">Author's Address</td><td class="lineno"></td></tr>
      <tr><td class="lineno"></td><td class="left"></td><td> </td><td class="right"></td><td class="lineno"></td></tr>

     <tr><td></td><td class="left"></td><td> </td><td class="right"></td><td></td></tr>
     <tr id="end" bgcolor="gray"><th colspan="5" align="center">&nbsp;End of changes. 69 change blocks.&nbsp;</th></tr>
     <tr class="stats"><td></td><th><i>289 lines changed or deleted</i></th><th><i> </i></th><th><i>349 lines changed or added</i></th><td></td></tr>
     <tr><td colspan="5" align="center" class="small"><br/>This html diff was produced by rfcdiff 1.48. The latest version is available from <a href="http://www.tools.ietf.org/tools/rfcdiff/" >http://tools.ietf.org/tools/rfcdiff/</a> </td></tr>
   </table>
   </body>
   </html>
